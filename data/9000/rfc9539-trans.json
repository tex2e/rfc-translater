{
  "title": {
    "text": "RFC 9539 - Unilateral Opportunistic Deployment of Encrypted Recursive‑to‑Authoritative DNS",
    "ja": "RFC 9539 - 暗号化された再帰-権威間DNSの一方的な日和見的展開"
  },
  "number": 9539,
  "created_at": "2024-03-04 23:12:30.110442+09:00",
  "updated_by": "自動生成＆有志による翻訳・編集",
  "contents": [
    {
      "indent": 0,
      "text": "Internet Engineering Task Force (IETF)                D. K. Gillmor, Ed.\nRequest for Comments: 9539                                          ACLU\nCategory: Experimental                                   J. Salazar, Ed.\nISSN: 2070-1721                                                         \n                                                         P. Hoffman, Ed.\n                                                                   ICANN\n                                                           February 2024",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 12,
      "text": "Unilateral Opportunistic Deployment of Encrypted Recursive-to-Authoritative DNS",
      "title": true,
      "section_title": true,
      "ja": "暗号化された再帰-権威間DNSの一方的な日和見的展開"
    },
    {
      "indent": 0,
      "text": "Abstract",
      "section_title": true,
      "ja": "概要"
    },
    {
      "indent": 3,
      "text": "This document sets out steps that DNS servers (recursive resolvers and authoritative servers) can take unilaterally (without any coordination with other peers) to defend DNS query privacy against a passive network monitor. The protections provided by the guidance in this document can be defeated by an active attacker, but they should be simpler and less risky to deploy than more powerful defenses.",
      "ja": "このドキュメントでは、DNSサーバー（再帰リゾルバと権威サーバー）が、パッシブなネットワーク監視者に対してDNSクエリのプライバシーを守るために、一方的に（他のピアと調整せずに）とることができる手順を定めています。このドキュメントのガイダンスによって提供される保護は、アクティブな攻撃者によって破られる可能性がありますが、より強力な防御よりも展開が容易でリスクが少ないはずです。"
    },
    {
      "indent": 3,
      "text": "The goal of this document is to simplify and speed up deployment of opportunistic encrypted transport in the recursive-to-authoritative hop of the DNS ecosystem. Wider easy deployment of the underlying encrypted transport on an opportunistic basis may facilitate the future specification of stronger cryptographic protections against more-powerful attacks.",
      "ja": "このドキュメントの目標は、DNSエコシステムの再帰-権威間ホップにおける日和見的な暗号化トランスポートの展開を簡素化し、高速化することです。基礎となる暗号化トランスポートの日和見的で広範かつ容易な展開は、より強力な攻撃に対するより強力な暗号化保護の将来の仕様策定を促進する可能性があります。"
    },
    {
      "indent": 0,
      "text": "Status of This Memo",
      "section_title": true,
      "ja": "本文書の位置付け"
    },
    {
      "indent": 3,
      "text": "This document is not an Internet Standards Track specification; it is published for examination, experimental implementation, and evaluation.",
      "ja": "このドキュメントは、インターネット標準化過程の仕様ではありません。試験、実験的実装、および評価のために公開されています。"
    },
    {
      "indent": 3,
      "text": "This document defines an Experimental Protocol for the Internet community. This document is a product of the Internet Engineering Task Force (IETF). It represents the consensus of the IETF community. It has received public review and has been approved for publication by the Internet Engineering Steering Group (IESG). Not all documents approved by the IESG are candidates for any level of Internet Standard; see Section 2 of RFC 7841.",
      "ja": "このドキュメントでは、インターネットコミュニティ向けの実験的プロトコルを定義しています。このドキュメントは、Internet Engineering Task Force (IETF) の成果物です。これはIETFコミュニティの合意を表しています。公開レビューを受け、Internet Engineering Steering Group (IESG) による発行が承認されています。IESGによって承認されたすべてのドキュメントが、あらゆるレベルのインターネット標準の候補になるわけではありません。RFC 7841のセクション2を参照してください。"
    },
    {
      "indent": 3,
      "text": "Information about the current status of this document, any errata, and how to provide feedback on it may be obtained at https://www.rfc-editor.org/info/rfc9539.",
      "ja": "このドキュメントの現在のステータス、任意のERRATA、およびそのフィードバックを提供する方法に関する情報は、https：//www.rfc-editor.org/info/rfc9539で取得できます。"
    },
    {
      "indent": 0,
      "text": "Copyright Notice",
      "section_title": true,
      "ja": "著作権表示"
    },
    {
      "indent": 3,
      "text": "Copyright (c) 2024 IETF Trust and the persons identified as the document authors. All rights reserved.",
      "ja": "Copyright (c) 2024 IETF Trustおよび文書の著者として特定された人物。All rights reserved."
    },
    {
      "indent": 3,
      "text": "This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (https://trustee.ietf.org/license-info) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Revised BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Revised BSD License.",
      "ja": "このドキュメントは、このドキュメントの発行日に有効なBCP 78およびIETFドキュメントに関するIETFトラストの法的規定（https://trustee.ietf.org/license-info）の対象となります。これらのドキュメントは、このドキュメントに関するあなたの権利と制限について説明しているため、注意深く確認してください。このドキュメントから抽出されたコードコンポーネントには、Trust Legal Provisionsのセクション4.eで説明されているRevised BSD Licenseテキストが含まれている必要があり、Revised BSD Licenseで説明されているように保証なしで提供されます。"
    },
    {
      "indent": 0,
      "text": "Table of Contents",
      "section_title": true,
      "ja": "目次"
    },
    {
      "indent": 3,
      "text": "1.  Introduction\n  1.1.  Requirements Language\n  1.2.  Terminology\n2.  Priorities\n  2.1.  Minimizing Negative Impacts\n  2.2.  Protocol Choices\n3.  Guidance for Authoritative Servers\n  3.1.  Pooled Authoritative Servers behind a Load Balancer\n  3.2.  Authentication\n  3.3.  Server Name Indication\n  3.4.  Resource Exhaustion\n  3.5.  Pad Responses to Mitigate Traffic Analysis\n4.  Guidance for Recursive Resolvers\n  4.1.  High-Level Overview\n  4.2.  Maintaining Authoritative State by IP Address\n  4.3.  Overall Recursive Resolver Settings\n  4.4.  Recursive Resolver Requirements\n  4.5.  Authoritative Server Encrypted Transport Connection State\n  4.6.  Probing Policy\n    4.6.1.  Sending a Query over Do53\n    4.6.2.  Receiving a Response over Do53\n    4.6.3.  Initiating a Connection over Encrypted Transport\n    4.6.4.  Establishing an Encrypted Transport Connection\n    4.6.5.  Failing to Establish an Encrypted Transport Connection\n    4.6.6.  Encrypted Transport Failure\n    4.6.7.  Handling Clean Shutdown of an Encrypted Transport\n            Connection\n    4.6.8.  Sending a Query over Encrypted Transport\n    4.6.9.  Receiving a Response over Encrypted Transport\n    4.6.10. Resource Exhaustion\n    4.6.11. Maintaining Connections\n    4.6.12. Additional Tuning\n5.  IANA Considerations\n6.  Privacy Considerations\n  6.1.  Server Name Indication\n  6.2.  Modeling the Probability of Encryption\n7.  Security Considerations\n8.  Operational Considerations\n9.  References\n  9.1.  Normative References\n  9.2.  Informative References\nAppendix A.  Assessing the Experiment\nAppendix B.  Defense against Active Attackers\n  B.1.  Signaling Mechanism Properties\n  B.2.  Authentication of Authoritative Servers\n  B.3.  Combining Protocols\nAcknowledgements\nAuthors' Addresses",
      "raw": true,
      "toc": true,
      "ja": ""
    },
    {
      "indent": 0,
      "text": "1. Introduction",
      "section_title": true,
      "ja": "1. はじめに"
    },
    {
      "indent": 3,
      "text": "This document aims to provide guidance to DNS implementers and operators who want to simply enable protection against passive network observers.",
      "ja": "このドキュメントは、パッシブなネットワーク監視者に対する保護を単純に有効にしたいDNS実装者とオペレーターにガイダンスを提供することを目的としています。"
    },
    {
      "indent": 3,
      "text": "In particular, it focuses on mechanisms that can be adopted unilaterally by recursive resolvers and authoritative servers, without any explicit coordination with the other parties. This guidance provides opportunistic security (see [RFC7435]), that is, encrypting things that would otherwise be in the clear, without interfering with or weakening stronger forms of security.",
      "ja": "特に、他の当事者との明示的な調整なしに、再帰リゾルバと権威サーバーによって一方的に採用できるメカニズムに焦点を当てています。このガイダンスは、日和見的なセキュリティ（[RFC7435]を参照）を提供します。つまり、より強力な形式のセキュリティを妨害したり弱めたりすることなく、そうでなければ平文であるものを暗号化します。"
    },
    {
      "indent": 3,
      "text": "This document also briefly introduces (but does not try to specify) how a future protocol might permit defense against an active attacker in Appendix B.",
      "ja": "また、このドキュメントでは、将来のプロトコルがアクティブな攻撃者に対する防御をどのように可能にするかについて、付録Bで簡単に紹介します（ただし、規定しようとはしません）。"
    },
    {
      "indent": 3,
      "text": "The protocol described here offers three concrete advantages to the DNS ecosystem:",
      "ja": "ここで説明するプロトコルは、DNSエコシステムに3つの具体的な利点を提供します。"
    },
    {
      "indent": 6,
      "text": "* Protection from passive attackers of DNS queries in transit between recursive and authoritative servers.",
      "ja": "* 再帰リゾルバと権威サーバーの間で転送中のDNSクエリの、パッシブな攻撃者からの保護。"
    },
    {
      "indent": 6,
      "text": "* A road map for gaining real-world experience at scale with encrypted protections of this traffic.",
      "ja": "* このトラフィックの暗号化による保護に関する、大規模な実世界での経験を得るためのロードマップ。"
    },
    {
      "indent": 6,
      "text": "* A bridge to some possible future protection against a more powerful attacker.",
      "ja": "* より強力な攻撃者に対する、より強力な暗号化保護の将来の仕様への架け橋。"
    },
    {
      "indent": 0,
      "text": "1.1. Requirements Language",
      "section_title": true,
      "ja": "1.1. 要件言語"
    },
    {
      "indent": 3,
      "text": "The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\", \"SHALL NOT\", \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"NOT RECOMMENDED\", \"MAY\", and \"OPTIONAL\" in this document are to be interpreted as described in BCP 14 [RFC2119] [RFC8174] when, and only when, they appear in all capitals, as shown here.",
      "ja": "このドキュメントのキーワード \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\", \"SHALL NOT\", \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"NOT RECOMMENDED\", \"MAY\", および \"OPTIONAL\" は、BCP 14 [RFC2119] [RFC8174]で説明されているように、すべて大文字の場合にのみ解釈されます。"
    },
    {
      "indent": 0,
      "text": "1.2. Terminology",
      "section_title": true,
      "ja": "1.2. 用語"
    },
    {
      "indent": 3,
      "text": "Unilateral:",
      "ja": "一方的："
    },
    {
      "indent": 12,
      "text": "Capable of opportunistic probing without external coordination with any of the other parties.",
      "ja": "他の当事者との外部調整なしに、日和見的なプロービングが可能です。"
    },
    {
      "indent": 3,
      "text": "Do53:",
      "ja": "Do53："
    },
    {
      "indent": 12,
      "text": "DNS over port 53 ([RFC1035]) for traditional cleartext transport.",
      "ja": "従来の平文トランスポートのためのポート53上のDNS ([RFC1035])。"
    },
    {
      "indent": 3,
      "text": "DoQ:",
      "ja": "DoQ："
    },
    {
      "indent": 12,
      "text": "DNS over QUIC ([RFC9250]).",
      "ja": "DNS over QUIC ([RFC9250])。"
    },
    {
      "indent": 3,
      "text": "DoT:",
      "ja": "DoT："
    },
    {
      "indent": 12,
      "text": "DNS over TLS ([RFC7858]).",
      "ja": "DNS over TLS ([RFC7858])。"
    },
    {
      "indent": 3,
      "text": "Encrypted transports:",
      "ja": "暗号化された交通機関："
    },
    {
      "indent": 12,
      "text": "DoQ and DoT, collectively.",
      "ja": "DoQおよびDoT、総称して。"
    },
    {
      "indent": 0,
      "text": "2. Priorities",
      "section_title": true,
      "ja": "2. 優先順位"
    },
    {
      "indent": 3,
      "text": "The protocol described in this document was developed with two priorities: minimizing negative impacts and retaining flexibility in the underlying encrypted transport protocol.",
      "ja": "このドキュメントで説明されているプロトコルは、2つの優先順位を持って開発されました。それは、悪影響を最小限に抑えることと、基礎となる暗号化トランスポートプロトコルの柔軟性を保持することです。"
    },
    {
      "indent": 0,
      "text": "2.1. Minimizing Negative Impacts",
      "section_title": true,
      "ja": "2.1. マイナスの影響を最小限に抑える"
    },
    {
      "indent": 3,
      "text": "The protocol described in this document aims to minimize potentially negative impacts caused by the probing of encrypted transports for the systems that adopt the protocol, for the parties that those systems communicate with, and for uninvolved third parties. The negative impacts that this protocol specifically tries to minimize are:",
      "ja": "このドキュメントで説明されているプロトコルは、プロトコルを採用するシステム、それらのシステムが通信する当事者、および無関係な第三者に対して、暗号化トランスポートのプロービングによって引き起こされる潜在的な悪影響を最小限に抑えることを目的としています。このプロトコルが特に最小化しようとする悪影響は次のとおりです。"
    },
    {
      "indent": 6,
      "text": "* excessive bandwidth use,",
      "ja": "* 過度の帯域幅使用、"
    },
    {
      "indent": 6,
      "text": "* excessive use of computational resources (CPU and memory in particular), and",
      "ja": "* 計算リソース（特にCPUとメモリ）の過度の使用、および"
    },
    {
      "indent": 6,
      "text": "* the potential for amplification attacks (where DNS resolution infrastructure is wielded as part of a DoS attack).",
      "ja": "* 増幅攻撃の可能性（DNS解決インフラストラクチャがDoS攻撃の一部として利用される場合）。"
    },
    {
      "indent": 0,
      "text": "2.2. Protocol Choices",
      "section_title": true,
      "ja": "2.2. プロトコルの選択"
    },
    {
      "indent": 3,
      "text": "Although this document focuses specifically on strategies used by DNS servers, it does not go into detail on the specific protocols used because those protocols, in particular DoT and DoQ, are described in other documents. The DoT specification ([RFC7858]) says that it:",
      "ja": "このドキュメントは、DNSサーバーが使用する戦略に特に焦点を当てていますが、使用される特定のプロトコル、特にDoTとDoQについては、他のドキュメントで説明されているため、詳細には触れません。DoT仕様（[RFC7858]）は次のように述べています。"
    },
    {
      "indent": 0,
      "text": "...focuses on securing stub-to-recursive traffic, as per the charter of the DPRIVE Working Group. It does not prevent future applications of the protocol to recursive-to-authoritative traffic.",
      "ja": "...DPRIVEワーキンググループの憲章に従い、スタブから再帰リゾルバへのトラフィックの保護に焦点を当てています。再帰リゾルバから権威サーバーへのトラフィックへのプロトコルの将来の適用を妨げるものではありません。"
    },
    {
      "indent": 3,
      "text": "It further says:",
      "ja": "さらに次のように述べています："
    },
    {
      "indent": 0,
      "text": "It might work equally between recursive clients and authoritative servers...",
      "ja": "再帰クライアントと権威サーバーの間でも同様に機能する可能性があります..."
    },
    {
      "indent": 3,
      "text": "The DoQ specification ([RFC9250]) says:",
      "ja": "DoQ仕様（[RFC9250]）は次のように述べています。"
    },
    {
      "indent": 0,
      "text": "For the recursive to authoritative scenario, authentication requirements are unspecified at the time of writing and are the subject of ongoing work in the DPRIVE WG.",
      "ja": "再帰リゾルバから権威サーバーへのシナリオの場合、認証要件は執筆時点では規定されておらず、DPRIVE WGで継続的な作業の対象となっています。"
    },
    {
      "indent": 3,
      "text": "The protocol described in this document specifies the use of DoT and DoQ without authentication of the server.",
      "ja": "このドキュメントで説明されているプロトコルは、サーバーの認証なしでのDoTとDoQの使用を指定しています。"
    },
    {
      "indent": 3,
      "text": "This document does not pursue the use of DNS over HTTPS, commonly called \"DoH\" ([RFC8484]), in this context because a DoH client needs to know the path part of a DoH endpoint URL. Currently, there are no mechanisms for a DNS recursive resolver to predict the path on its own, in an opportunistic or unilateral fashion, without incurring an excessive use of resources. If such mechanisms are later defined, the protocol in this document can be updated to accommodate them.",
      "ja": "このドキュメントでは、DoHクライアントがDoHエンドポイントURLのパス部分を知る必要があるため、このコンテキストでは、一般的に「DoH」（[RFC8484]）と呼ばれるDNS over HTTPSの使用を追求していません。現在、リソースの過度の使用を伴うことなく、日和見的または一方的な方法で、DNS再帰リゾルバが独自にパスを予測するためのメカニズムはありません。そのようなメカニズムが後で定義された場合、このドキュメントのプロトコルを更新してそれらに対応できます。"
    },
    {
      "indent": 0,
      "text": "3. Guidance for Authoritative Servers",
      "section_title": true,
      "ja": "3. 権威あるサーバーのガイダンス"
    },
    {
      "indent": 3,
      "text": "The protocol described in this document is OPTIONAL for authoritative servers. An authoritative server choosing to implement the protocol described in this document MUST implement at least one of either DoT or DoQ on port 853.",
      "ja": "このドキュメントで説明されているプロトコルは、権威サーバーにとってOPTIONAL（任意）です。このドキュメントで説明されているプロトコルを実装することを選択する権威サーバーは、ポート853にDoTまたはDoQの少なくとも1つを実装しなければなりません（MUST）。"
    },
    {
      "indent": 3,
      "text": "An authoritative server choosing to implement the protocol described in this document MAY require clients to use Application-Layer Protocol Negotiation (ALPN) (see [RFC7301]). The ALPN strings the client will use are given in Section 4.4.",
      "ja": "このドキュメントで説明されているプロトコルを実装することを選択する権威サーバーは、クライアントがApplication-Layer Protocol Negotiation (ALPN) を使用することを要求してもかまいません（MAY）（[RFC7301]を参照）。クライアントが使用するALPN文字列は、セクション4.4に記載されています。"
    },
    {
      "indent": 3,
      "text": "An authoritative server implementing DoT or DoQ MUST populate the response from the same authoritative zone data as the unencrypted DNS transports. Encrypted transports have their own characteristic response size that might be different from the unencrypted DNS transports, so response sizes and related options (e.g., Extension Mechanisms for DNS (EDNS0)) and flags (e.g., the TrunCation (TC) bit) might vary based on the transport. In other words, the content of the responses to a particular query MUST be the same regardless of the type of transport.",
      "ja": "DoTまたはDoQを実装する権威サーバーは、暗号化されていないDNSトランスポートと同じ権威ゾーンデータから応答を生成しなければなりません（MUST）。暗号化されたトランスポートには、暗号化されていないDNSトランスポートとは異なる可能性のある独自の特徴的な応答サイズがあるため、応答サイズと関連オプション（例：DNSの拡張メカニズム（EDNS0））およびフラグ（例：切り捨て（TC）ビット）は、トランスポートに基づいて異なる場合があります。言い換えれば、特定のクエリへの応答の内容は、トランスポートの種類に関係なく同じでなければなりません（MUST）。"
    },
    {
      "indent": 0,
      "text": "3.1. Pooled Authoritative Servers behind a Load Balancer",
      "section_title": true,
      "ja": "3.1. ロードバランサーの背後にある権威あるサーバーをプールしました"
    },
    {
      "indent": 3,
      "text": "Some authoritative DNS servers are structured as a pool of authoritatives standing behind a load balancer that runs on a single IP address, forwarding queries to members of the pool. In such a deployment, individual members of the pool typically get updated independently from each other.",
      "ja": "一部の権威DNSサーバーは、単一のIPアドレスで実行されるロードバランサーの背後にある権威サーバーのプールとして構成され、プールのメンバーにクエリを転送します。このような展開では、プールの個々のメンバーは通常、互いに独立して更新されます。"
    },
    {
      "indent": 3,
      "text": "A recursive resolver following the guidance in Section 4 and interacting with such a pool likely does not know that it is a pool. If some members of the pool follow the protocol specified in this document while others do not, the recursive client might see the pool as a single authoritative server that sometimes offers and sometimes refuses encrypted transport.",
      "ja": "セクション4のガイダンスに従う再帰リゾルバは、そのようなプールと対話しても、それがプールであることを知らない可能性があります。プールの一部のメンバーは、このドキュメントで指定されたプロトコルに従っていますが、他のメンバーはそうでない場合、再帰クライアントは、プールを、時々暗号化されたトランスポートを提供し、時には拒否する単一の権威サーバーとして見るかもしれません。"
    },
    {
      "indent": 3,
      "text": "To avoid incurring additional minor timeouts for such a recursive resolver, the pool operator SHOULD:",
      "ja": "このような再帰リゾルバに追加の軽微なタイムアウトが発生しないようにするには、プールオペレーターは次のようにすべきです（SHOULD）。"
    },
    {
      "indent": 6,
      "text": "* ensure that all members of the pool enable the same encrypted transport(s) within the span of a few seconds (such as within 30 seconds), or",
      "ja": "* プールのすべてのメンバーが、数秒（30秒以内など）のスパン内で同じ暗号化されたトランスポートを有効にすること、または"
    },
    {
      "indent": 6,
      "text": "* ensure that the load balancer maps client requests to pool members based on client IP addresses, or",
      "ja": "* ロードバランサーがクライアントのIPアドレスに基づいてプールメンバーにクライアントのリクエストをマッピングすること、または"
    },
    {
      "indent": 6,
      "text": "* use a load balancer that forwards queries/connections on encrypted transports to only those members of the pool known (e.g., via monitoring) to support the given encrypted transport.",
      "ja": "* 特定の暗号化されたトランスポートをサポートすることが（監視などを介して）わかっているプールのメンバーのみに、暗号化されたトランスポート上のクエリ/接続を転送するロードバランサーを使用すること。"
    },
    {
      "indent": 3,
      "text": "Similar concerns apply to authoritative servers responding from an anycast IP address. As long as the pool of servers is in a heterogeneous state, any flapping route that switches a given client IP address to a different responder risks incurring an additional timeout. Frequent changes of routing for anycast listening IP addresses are also likely to cause problems for TLS, TCP, or QUIC connection state as well, so stable routes are important to ensure that the service remains available and responsive. The servers in a pool can share session information to increase the likelihood of successful resumptions.",
      "ja": "同様の懸念が、エニーキャストIPアドレスから応答する権威サーバーにも適用されます。サーバーのプールが不均一な状態にある限り、特定のクライアントIPアドレスを別のレスポンダーに切り替えるフラッピングルートは、追加のタイムアウトを招くリスクがあります。エニーキャストリスニングIPアドレスのルーティングの頻繁な変更も、TLS、TCP、またはQUIC接続状態に問題を引き起こす可能性が高いため、サービスが利用可能で応答性が高いことを保証するためには、安定したルートが重要です。プール内のサーバーは、セッション情報を共有して、再開が成功する可能性を高めることができます。"
    },
    {
      "indent": 0,
      "text": "3.2. Authentication",
      "section_title": true,
      "ja": "3.2. 認証"
    },
    {
      "indent": 3,
      "text": "For unilateral deployment, an authoritative server does not need to offer any particular form of authentication.",
      "ja": "一方的な展開のために、権威サーバーは特定の形式の認証を提供する必要はありません。"
    },
    {
      "indent": 3,
      "text": "One simple deployment approach would just be to provide a self-issued, regularly updated X.509 certificate. Whether the certificates used are short-lived or long-lived is up to the deployment. This mechanism is supported by many TLS and QUIC clients and will be acceptable for any opportunistic connection. The server could provide a normal PKI-based certificate, but there is no advantage to doing so at this time.",
      "ja": "単純な展開アプローチの1つは、自己発行の定期的に更新されたX.509証明書を提供することです。使用される証明書が短命であるか、長寿命であるかは、展開次第です。このメカニズムは、多くのTLSおよびQUICクライアントによってサポートされており、日和見的な接続には受け入れられます。サーバーは通常のPKIベースの証明書を提供できますが、現時点ではそれを行うことに利点はありません。"
    },
    {
      "indent": 0,
      "text": "3.3. Server Name Indication",
      "section_title": true,
      "ja": "3.3. サーバー名の表示"
    },
    {
      "indent": 3,
      "text": "An authoritative DNS server that wants to handle unilateral queries MAY rely on Server Name Indication (SNI) to select alternate server credentials. However, such a server MUST NOT serve resource records that differ based on SNI (or on the lack of an SNI) provided by the client because a probing recursive resolver that offers SNI might or might not have used the right server name to get the records it is looking for.",
      "ja": "一方的なクエリを処理したい権威DNSサーバーは、代替サーバーの資格情報を選択するためにServer Name Indication (SNI) に依存してもかまいません（MAY）。ただし、このようなサーバーは、クライアントによって提供されたSNI（またはSNIの欠如）に基づいて異なるリソースレコードを提供してはなりません（MUST NOT）。なぜなら、SNIを提供するプロービング再帰リゾルバは、探しているレコードを取得するために正しいサーバー名を使用したかもしれないし、使用していないかもしれないからです。"
    },
    {
      "indent": 0,
      "text": "3.4. Resource Exhaustion",
      "section_title": true,
      "ja": "3.4. リソースの疲労"
    },
    {
      "indent": 3,
      "text": "A well-behaved recursive resolver may keep an encrypted connection open to an authoritative server to amortize the costs of connection setup for both parties.",
      "ja": "行儀の良い再帰リゾルバは、暗号化された接続を権威サーバーに対して開いたままにして、両当事者の接続セットアップのコストを償却することができます。"
    },
    {
      "indent": 3,
      "text": "However, some authoritative servers may have insufficient resources available to keep many connections open concurrently.",
      "ja": "ただし、一部の権威サーバーには、多くの接続を同時に開いたままにするために利用可能なリソースが不十分な場合があります。"
    },
    {
      "indent": 3,
      "text": "To keep resources under control, authoritative servers should proactively manage their encrypted connections. Section 5.5 of [RFC9250] offers useful guidance for servers managing DoQ connections. Section 3.4 of [RFC7858] offers useful guidance for servers managing DoT connections.",
      "ja": "リソースを制御するために、権威サーバーは暗号化された接続を積極的に管理する必要があります。[RFC9250]のセクション5.5は、DoQ接続を管理するサーバーに有用なガイダンスを提供します。[RFC7858]のセクション3.4は、DoT接続を管理するサーバーに有用なガイダンスを提供します。"
    },
    {
      "indent": 3,
      "text": "An authoritative server facing unforeseen resource exhaustion SHOULD cleanly close open connections from recursive resolvers based on the authoritative server's preferred prioritization.",
      "ja": "予期せぬリソースの枯渇に直面している権威サーバーは、権威サーバーの優先順位付けに基づいて、再帰リゾルバからのオープンな接続をきれいに閉じるべきです（SHOULD）。"
    },
    {
      "indent": 3,
      "text": "In the case of unanticipated resource exhaustion, close connections until resources are back in control. A reasonable prioritization scheme would be to close connections with no outstanding queries, ordered by idle time (longest idle time gets closed first), then close connections with outstanding queries, ordered by age of outstanding query (oldest outstanding query gets closed first).",
      "ja": "予期しないリソースの枯渇の場合、リソースが制御下に戻るまで接続を閉じます。合理的な優先順位付けスキームは、アイドル時間順（最長のアイドル時間が最初に閉じられる）で未処理のクエリがない接続を閉じ、次に未処理のクエリの経過時間順（最も古い未処理のクエリが最初に閉じられる）で未処理のクエリがある接続を閉じることです。"
    },
    {
      "indent": 3,
      "text": "When resources are especially tight, the authoritative server may also decline to accept new connections over encrypted transport.",
      "ja": "リソースが特に逼迫している場合、権威サーバーは、暗号化されたトランスポートを介した新しい接続を受け入れることを拒否する場合もあります。"
    },
    {
      "indent": 0,
      "text": "3.5. Pad Responses to Mitigate Traffic Analysis",
      "section_title": true,
      "ja": "3.5. トラフィック分析を緩和するためのパッド応答"
    },
    {
      "indent": 3,
      "text": "To increase the anonymity set for each response, the authoritative server SHOULD use a sensible padding mechanism for all responses it sends when possible. The ability for the authoritative server to add padding might be limited, such as by not receiving an EDNS0 option in the query. Specifically, a DoT server SHOULD use EDNS0 padding [RFC7830] if possible, and a DoQ server SHOULD follow the guidance in Section 5.4 of [RFC9250]. How much to pad is out of scope of this document, but a reasonable suggestion can be found in [RFC8467].",
      "ja": "各応答の匿名性セットを増やすために、権威サーバーは、可能な場合に送信するすべての応答に対して賢明なパディングメカニズムを使用すべきです（SHOULD）。クエリでEDNS0オプションを受信しないなど、権威サーバーがパディングを追加する機能は制限される場合があります。具体的には、DoTサーバーは、可能であればEDNS0パディング[RFC7830]を使用すべきであり（SHOULD）、DoQサーバーは[RFC9250]のセクション5.4のガイダンスに従うべきです（SHOULD）。どれだけパディングするかはこのドキュメントの範囲外ですが、[RFC8467]に合理的な提案があります。"
    },
    {
      "indent": 0,
      "text": "4. Guidance for Recursive Resolvers",
      "section_title": true,
      "ja": "4. 再帰的なリゾルバーのガイダンス"
    },
    {
      "indent": 3,
      "text": "The protocol described in this document is OPTIONAL for recursive resolvers. This section outlines a probing policy suitable for unilateral adoption by any recursive resolver. Following this policy should not result in failed resolutions or significant delays.",
      "ja": "このドキュメントで説明されているプロトコルは、再帰リゾルバにとってOPTIONAL（任意）です。このセクションでは、再帰リゾルバによる一方的な採用に適したプロービングポリシーの概要を説明します。このポリシーに従うことで、解決の失敗や大幅な遅延が生じることはないはずです。"
    },
    {
      "indent": 0,
      "text": "4.1. High-Level Overview",
      "section_title": true,
      "ja": "4.1. 高レベルの概要"
    },
    {
      "indent": 3,
      "text": "In addition to querying on Do53, the recursive resolver will try DoT, DoQ, or both concurrently. The recursive resolver remembers what opportunistic encrypted transport protocols have worked recently based on a (clientIP, serverIP, protocol) tuple.",
      "ja": "Do53でのクエリに加えて、再帰リゾルバはDoT、DoQ、またはその両方を同時に試します。再帰リゾルバは、(clientIP, serverIP, protocol) のタプルに基づいて、どの日和見的な暗号化トランスポートプロトコルが最近機能したかを記憶します。"
    },
    {
      "indent": 3,
      "text": "If a query needs to go to a given authoritative server, and the recursive resolver remembers a recent successful encrypted transport to that server, then it doesn't send the query over Do53 at all. Rather, it only sends the query using the encrypted transport protocol that was recently shown to be good.",
      "ja": "クエリが特定の権威サーバーに送られる必要があり、再帰リゾルバがそのサーバーへの最近の成功した暗号化トランスポート接続を記憶している場合、Do53ではクエリを送信しません。むしろ、最近良好であることが示された暗号化トランスポートプロトコルを使用してクエリを送信するだけです。"
    },
    {
      "indent": 3,
      "text": "If the encrypted transport protocol fails, the recursive resolver falls back to Do53 for that serverIP. When any encrypted transport fails, the recursive resolver remembers that failure for a reasonable amount of time to avoid flooding an incompatible server with requests that it cannot accept. The description of how an encrypted transport protocol fails is in Section 4.6.4 and the sections following that.",
      "ja": "暗号化されたトランスポートプロトコルが失敗した場合、再帰リゾルバはそのserverIPに対してDo53にフォールバックします。暗号化されたトランスポートが失敗した場合、再帰リゾルバは、受け入れられない要求で互換性のないサーバーをあふれさせることを避けるために、合理的な時間の間その失敗を記憶します。暗号化されたトランスポートプロトコルがどのように失敗するかの説明は、セクション4.6.4およびそれ以降のセクションにあります。"
    },
    {
      "indent": 3,
      "text": "See the subsections below for a more detailed description of this protocol.",
      "ja": "このプロトコルのより詳細な説明については、以下のサブセクションを参照してください。"
    },
    {
      "indent": 0,
      "text": "4.2. Maintaining Authoritative State by IP Address",
      "section_title": true,
      "ja": "4.2. IPアドレスごとに権威ある状態を維持します"
    },
    {
      "indent": 3,
      "text": "In designing a probing strategy, the recursive resolver could record its knowledge about any given authoritative server with different strategies, including at least:",
      "ja": "プロービング戦略を設計する際に、再帰リゾルバは、少なくとも以下を含むさまざまな戦略で、特定の権威サーバーに関する知識を記録できます。"
    },
    {
      "indent": 6,
      "text": "* the authoritative server's IP address,",
      "ja": "* 権威サーバーのIPアドレス、"
    },
    {
      "indent": 6,
      "text": "* the authoritative server's name (the NS record used), or",
      "ja": "* 権威サーバーの名前（使用されているNSレコード）、または"
    },
    {
      "indent": 6,
      "text": "* the zone that contains the record being looked up.",
      "ja": "* 見上げられているレコードを含むゾーン。"
    },
    {
      "indent": 3,
      "text": "This document encourages the first strategy, to minimize timeouts or accidental delays, and does not describe the other two strategies.",
      "ja": "このドキュメントは、タイムアウトや偶発的な遅延を最小限に抑えるために最初の戦略を推奨し、他の2つの戦略については説明しません。"
    },
    {
      "indent": 3,
      "text": "A timeout (accidental delay) is most likely to happen when the recursive client believes that the authoritative server offers encrypted transport, but the actual server reached declines encrypted transport (or worse, filters the incoming traffic and does not even respond with an ICMP destination port unreachable message, such as during rate limiting).",
      "ja": "再帰クライアントが権威サーバーが暗号化されたトランスポートを提供していると信じているが、実際に到達したサーバーが暗号化されたトランスポートを拒否した場合（またはさらに悪いことに、着信トラフィックをフィルタリングし、レート制限中などにICMP宛先ポート到達不能メッセージで応答することさえしない場合）、タイムアウト（偶発的な遅延）が発生する可能性が最も高くなります。"
    },
    {
      "indent": 3,
      "text": "By associating the state with the authoritative IP address, the client can minimize the number of accidental delays introduced (see also Sections 3.1 and 4.5).",
      "ja": "状態を権威あるIPアドレスに関連付けることにより、クライアントは導入された偶発的な遅延の数を最小限に抑えることができます（セクション3.1および4.5も参照）。"
    },
    {
      "indent": 3,
      "text": "For example, consider an authoritative server named ns0.example.com that is served by two installations: one at 2001:db8::7 that follows this guidance and one at 2001:db8::8 that is a legacy (cleartext port 53-only) deployment. A recursive client who associates state with the NS name and reaches 2001:db8::7 first will \"learn\" that ns0.example.com supports encrypted transport. A subsequent query over encrypted transport dispatched to 2001:db8::8 would fail, potentially delaying the response.",
      "ja": "たとえば、ns0.example.comという名前の権威サーバーが2つのインストールによって提供されているとします。1つは2001:db8::7でこのガイダンスに従っており、もう1つは2001:db8::8でレガシー（平文ポート53のみ）の展開です。NS名に状態を関連付け、最初に2001:db8::7に到達した再帰クライアントは、ns0.example.comが暗号化されたトランスポートをサポートしていることを「学習」します。暗号化されたトランスポートを介して2001:db8::8に送信された後続のクエリは失敗し、応答が遅れる可能性があります。"
    },
    {
      "indent": 0,
      "text": "4.3. Overall Recursive Resolver Settings",
      "section_title": true,
      "ja": "4.3. 全体的な再帰リゾルバー設定"
    },
    {
      "indent": 3,
      "text": "A recursive resolver implementing the protocol in this document needs to set system-wide values for some default parameters. These parameters may be set independently for each supported encrypted transport, though a simple implementation may keep the parameters constant across encrypted transports.",
      "ja": "このドキュメントでプロトコルを実装する再帰リゾルバーは、一部のデフォルトパラメーターのシステム全体の値を設定する必要があります。これらのパラメーターは、サポートされている各暗号化されたトランスポートごとに独立して設定される場合がありますが、単純な実装により、暗号化された輸送全体でパラメーターが一定に保たれる場合があります。"
    },
    {
      "indent": 6,
      "text": "+=============+==================================+===========+\n| Name        | Description                      | Suggested |\n|             |                                  | Default   |\n+=============+==================================+===========+\n| persistence | How long the recursive resolver  | 3 days    |\n|             | remembers a successful encrypted | (259200   |\n|             | transport connection             | seconds)  |\n+-------------+----------------------------------+-----------+\n| damping     | How long the recursive resolver  | 1 day     |\n|             | remembers an unsuccessful        | (86400    |\n|             | encrypted transport connection   | seconds)  |\n+-------------+----------------------------------+-----------+\n| timeout     | How long the recursive resolver  | 4 seconds |\n|             | waits for an initiated encrypted |           |\n|             | connection to complete           |           |\n+-------------+----------------------------------+-----------+",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 12,
      "text": "Table 1: Recursive Resolver System Parameters per Encrypted Transport",
      "ja": "表1：暗号化された輸送ごとの再帰リゾルバーシステムパラメーター"
    },
    {
      "indent": 3,
      "text": "This document uses the notation <transport>-foo to refer to the foo parameter for the encrypted transport <transport>. For example, DoT-persistence would indicate the length of time that the recursive resolver will remember that an authoritative server had a successful connection over DoT. Additionally, when describing an arbitrary encrypted transport, we use E in place of <transport> to generically mean whatever encrypted transport is in use. For example, when handling a query sent over encrypted transport E, a reference to E-timeout should be understood to mean DoT-timeout if the query is sent over DoT, and to mean DoQ-timeout if the query is sent over DoQ.",
      "ja": "このドキュメントでは、暗号化トランスポート <transport> の foo パラメータを参照するために、<transport>-foo という表記を使用します。たとえば、DoT-persistence は、権威サーバーが DoT 経由で接続に成功したことを再帰リゾルバが記憶する期間を示します。さらに、任意の暗号化トランスポートについて説明する場合、<transport> の代わりに E を使用して、使用中の暗号化トランスポートを総称的に意味します。たとえば、暗号化トランスポート E を介して送信されたクエリを処理する場合、E-timeout への参照は、クエリが DoT 経由で送信された場合は DoT-timeout を意味し、クエリが DoQ 経由で送信された場合は DoQ-timeout を意味すると理解する必要があります。"
    },
    {
      "indent": 3,
      "text": "This document also assumes that the recursive resolver maintains a list of outstanding cleartext queries destined for the authoritative server's IP address X. This list is referred to as \"Do53-queries[X]\" This document does not attempt to describe the specific operation of sending and receiving cleartext DNS queries (Do53) for a recursive resolver. Instead it describes a \"bolt-on\" mechanism that extends the recursive resolver's operation on a few simple hooks into the recursive resolver's existing handling of Do53.",
      "ja": "また、このドキュメントでは、再帰リゾルバが、権威サーバーのIPアドレスX宛ての未解決の平文クエリのリストを維持していることも想定しています。このリストは「Do53-queries[X]」と呼ばれます。このドキュメントでは、再帰リゾルバの平文DNSクエリ（Do53）の送受信の具体的な動作については説明しません。代わりに、再帰リゾルバの既存のDo53処理へのいくつかの単純なフックによって再帰リゾルバの動作を拡張する「ボルトオン」メカニズムについて説明します。"
    },
    {
      "indent": 3,
      "text": "Implementers or deployers of DNS recursive resolvers that follow the strategies in this document are encouraged to publish their preferred values of these parameters.",
      "ja": "このドキュメントの戦略に従うDNS再帰リゾルバの実装者または展開者は、これらのパラメータの推奨値を公開することが推奨されます。"
    },
    {
      "indent": 0,
      "text": "4.4. Recursive Resolver Requirements",
      "section_title": true,
      "ja": "4.4. 再帰的なリゾルバーの要件"
    },
    {
      "indent": 3,
      "text": "To follow the strategies in this document, a recursive resolver MUST implement at least one of either DoT or DoQ in its capacity as a client of authoritative nameservers. A recursive resolver SHOULD implement the client side of DoT. A recursive resolver SHOULD implement the client side of DoQ.",
      "ja": "このドキュメントの戦略に従うには、再帰リゾルバは、権威ネームサーバーのクライアントとしての能力において、DoTまたはDoQの少なくとも1つを実装しなければなりません（MUST）。再帰リゾルバは、DoTのクライアント側を実装すべきです（SHOULD）。再帰リゾルバは、DoQのクライアント側を実装すべきです（SHOULD）。"
    },
    {
      "indent": 3,
      "text": "DoT queries from the recursive resolver MUST target TCP port 853 using an ALPN of \"dot\". DoQ queries from the recursive resolver MUST target UDP port 853 using an ALPN of \"doq\".",
      "ja": "再帰リゾルバからのDoTクエリは、「dot」のALPNを使用してTCPポート853をターゲットにしなければなりません（MUST）。再帰リゾルバからのDoQクエリは、「doq」のALPNを使用してUDPポート853をターゲットにしなければなりません（MUST）。"
    },
    {
      "indent": 3,
      "text": "While this document focuses on the recursive-to-authoritative hop, a recursive resolver implementing the strategies in this document SHOULD also accept queries from its clients over some encrypted transport unless it only accepts queries from the localhost.",
      "ja": "このドキュメントでは、再帰-権威間ホップに焦点を当てていますが、このドキュメントの戦略を実装する再帰リゾルバは、ローカルホストからのクエリのみを受け入れる場合を除き、暗号化されたトランスポートを介してクライアントからのクエリも受け入れるべきです（SHOULD）。"
    },
    {
      "indent": 0,
      "text": "4.5. Authoritative Server Encrypted Transport Connection State",
      "section_title": true,
      "ja": "4.5. 権威あるサーバー暗号化されたトランスポート接続状態"
    },
    {
      "indent": 3,
      "text": "The recursive resolver SHOULD keep a record of the state for each authoritative server it contacts, indexed by the IP address of the authoritative server and the encrypted transports supported by the recursive resolver.",
      "ja": "再帰リゾルバは、接触する権威サーバーごとに状態の記録を保持すべきです（SHOULD）。これは、権威サーバーのIPアドレスと、再帰リゾルバによってサポートされる暗号化されたトランスポートによってインデックス付けされます。"
    },
    {
      "indent": 3,
      "text": "Note that the recursive resolver might record this per-authoritative-IP state for each source IP address it uses as it sends its queries. For example, if a recursive resolver can send a packet to authoritative servers from IP addresses 2001:db8::100 and 2001:db8::200, it could keep two distinct sets of per-authoritative-IP state: one for each source address it uses, if the recursive resolver knows the addresses in use. Keeping these state tables distinct for each source address makes it possible for a pooled authoritative server behind a load balancer to do a partial rollout while minimizing accidental timeouts (see Section 3.1).",
      "ja": "再帰リゾルバは、クエリを送信するときに使用する各ソースIPアドレスに対して、この権威IPごとの状態を記録する可能性があることに注意してください。たとえば、再帰リゾルバがIPアドレス2001:db8::100および2001:db8::200から権威サーバーにパケットを送信できる場合、再帰リゾルバが使用中のアドレスを知っていれば、使用する各ソースアドレスに対して1つずつ、2つの異なる権威IPごとの状態セットを保持できます。これらの状態テーブルを各ソースアドレスに対して別々に保持することで、ロードバランサーの背後にあるプールされた権威サーバーが、偶発的なタイムアウトを最小限に抑えながら部分的なロールアウトを行うことが可能になります（セクション3.1を参照）。"
    },
    {
      "indent": 3,
      "text": "In addition to tracking the state of connection attempts and outcomes, a recursive resolver SHOULD record the state of established sessions for encrypted protocols. The details of how sessions are identified are dependent on the transport protocol implementation (such as a TLS session ticket or TLS session ID, a QUIC connection ID, and so on). The use of session resumption as recommended here is limited somewhat because the tickets are only stored within the context defined by the (clientIP, serverIP, protocols) tuples used to track client-server interaction by the recursive resolver in a table like the one below. However, session resumption still offers the ability to optimize the handshake in some circumstances.",
      "ja": "接続の試行と結果の状態を追跡することに加えて、再帰リゾルバは、暗号化されたプロトコルの確立されたセッションの状態を記録すべきです（SHOULD）。セッションの識別方法の詳細は、トランスポートプロトコルの実装（TLSセッションチケットまたはTLSセッションID、QUIC接続IDなど）に依存します。ここで推奨されるセッション再開の使用は、チケットが、以下の表のように再帰リゾルバによるクライアントサーバーの相互作用を追跡するために使用される (clientIP, serverIP, protocols) タプルによって定義されたコンテキスト内にのみ保存されるため、多少制限されます。ただし、セッション再開は、状況によってはハンドシェイクを最適化する機能を依然として提供します。"
    },
    {
      "indent": 3,
      "text": "Each record should contain the following fields for each supported encrypted transport, each of which would initially be null:",
      "ja": "各レコードには、サポートされている各暗号化トランスポートについて次のフィールドを含める必要があります。各フィールドは最初はnullになります。"
    },
    {
      "indent": 4,
      "text": "+===============+======================================+=========+\n| Name          | Description                          | Retain  |\n|               |                                      | Across  |\n|               |                                      | Restart |\n+===============+======================================+=========+\n| session       | The associated state of any existing | no      |\n|               | established session (the structure   |         |\n|               | of this value is dependent on the    |         |\n|               | encrypted transport implementation). |         |\n|               | If session is not null, it may be in |         |\n|               | one of two states: pending or        |         |\n|               | established.                         |         |\n+---------------+--------------------------------------+---------+\n| initiated     | Timestamp of the most recent         | yes     |\n|               | connection attempt                   |         |\n+---------------+--------------------------------------+---------+\n| completed     | Timestamp of the most recent         | yes     |\n|               | completed handshake (which can       |         |\n|               | include one where an existing        |         |\n|               | session is resumed)                  |         |\n+---------------+--------------------------------------+---------+\n| status        | Enumerated value of success, fail,   | yes     |\n|               | or timeout associated with the       |         |\n|               | completed handshake                  |         |\n+---------------+--------------------------------------+---------+\n| last-response | A timestamp of the most recent       | yes     |\n|               | response received on the connection  |         |\n+---------------+--------------------------------------+---------+\n| resumptions   | A stack of resumption tickets (and   | yes     |\n|               | associated parameters) that could be |         |\n|               | used to resume a prior successful    |         |\n|               | session                              |         |\n+---------------+--------------------------------------+---------+\n| queries       | A queue of queries intended for this | no      |\n|               | authoritative server, each of which  |         |\n|               | has additional status of early,      |         |\n|               | unsent, or sent                      |         |\n+---------------+--------------------------------------+---------+\n| last-activity | A timestamp of the most recent       | no      |\n|               | activity on the connection           |         |\n+---------------+--------------------------------------+---------+",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 8,
      "text": "Table 2: Recursive Resolver State per-Authoritative-IP and per-Encrypted Transport",
      "ja": "表2：権威IPごとおよび暗号化トランスポートごとの再帰リゾルバの状態"
    },
    {
      "indent": 3,
      "text": "Note that the session fields in aggregate constitute a pool of open connections to different servers.",
      "ja": "セッションフィールド全体で、異なるサーバーへのオープン接続のプールを構成することに注意してください。"
    },
    {
      "indent": 3,
      "text": "With the exception of the session, queries, and last-activity fields, this cache information should be kept across restart of the server unless explicitly cleared by administrative action.",
      "ja": "session、queries、および last-activity フィールドを除き、このキャッシュ情報は、管理アクションによって明示的にクリアされない限り、サーバーの再起動をまたいで保持する必要があります。"
    },
    {
      "indent": 3,
      "text": "This document uses the notation E-foo[X] to indicate the value of field foo for encrypted transport E to IP address X.",
      "ja": "このドキュメントでは、表記 E-foo[X] を使用して、IPアドレスXへの暗号化トランスポートEのフィールド foo の値を示します。"
    },
    {
      "indent": 3,
      "text": "For example, DoT-initiated[192.0.2.4] represents the timestamp when the most recent DoT connection packet was sent to IP address 192.0.2.4.",
      "ja": "たとえば、DoT-initiated[192.0.2.4] は、最新のDoT接続パケットがIPアドレス192.0.2.4に送信されたときのタイムスタンプを表します。"
    },
    {
      "indent": 3,
      "text": "This document uses the notation any-E-queries to indicate any query on an encrypted transport.",
      "ja": "このドキュメントでは、表記 any-E-queries を使用して、暗号化されたトランスポート上の任意のクエリを示します。"
    },
    {
      "indent": 0,
      "text": "4.6. Probing Policy",
      "section_title": true,
      "ja": "4.6. プロービングポリシー"
    },
    {
      "indent": 3,
      "text": "When a recursive resolver discovers the need for an authoritative lookup to an authoritative DNS server using that server's IP address X, it retrieves the connection state records described in Section 4.5 associated with X from its cache.",
      "ja": "再帰的なリゾルバーが、そのサーバーのIPアドレスXを使用して権威あるDNSサーバーへの権威ある検索の必要性を発見すると、キャッシュからXに関連付けられたセクション4.5で説明されている接続状態レコードを取得します。"
    },
    {
      "indent": 3,
      "text": "Some of the subsections that follow offer pseudocode that corresponds roughly to an asynchronous programming model for a recursive resolver's interactions with authoritative servers. All subsections also presume that the time of the discovery of the need for lookup is time T0.",
      "ja": "以下のサブセクションの一部は、再帰的なリゾルバーと権威あるサーバーとの相互作用のための非同期プログラミングモデルに大まかに対応する擬似コードを提供します。また、すべてのサブセクションは、検索の必要性が発見された時期は時間T0であると推測しています。"
    },
    {
      "indent": 3,
      "text": "If any of the records discussed here are absent, they are treated as null.",
      "ja": "ここで議論されている記録のいずれかが存在しない場合、それらはヌルとして扱われます。"
    },
    {
      "indent": 3,
      "text": "The recursive resolver must decide whether to initially send a query over Do53, or over either of the supported encrypted transports (DoT or DoQ).",
      "ja": "再帰的なリゾルバーは、最初にDO53を介してクエリを送信するか、サポートされている暗号化されたトランスポート（DOTまたはDOQ）を介してクエリを送信するかを決定する必要があります。"
    },
    {
      "indent": 3,
      "text": "Note that a recursive resolver might initiate this query via any or all of the known transports. When multiple queries are sent, the initial packets for each connection can be sent concurrently, similar to the method used in the document known as \"Happy Eyeballs\" ([RFC8305]). However, unlike Happy Eyeballs, when one transport succeeds, the other connections do not need to be terminated; instead they can be continued to establish whether the IP address X is capable of communicating on the relevant transport.",
      "ja": "再帰的なリゾルバーは、既知のトランスポートのいずれかまたはすべてを介してこのクエリを開始する可能性があることに注意してください。複数のクエリが送信されると、各接続の初期パケットは、「Happy Eyeballs」（[RFC8305]）として知られるドキュメントで使用される方法と同様に、同時に送信できます。ただし、幸せな眼球とは異なり、1つの輸送が成功すると、他の接続を終了する必要はありません。代わりに、IPアドレスXが関連する輸送で通信できるかどうかを確立することができます。"
    },
    {
      "indent": 0,
      "text": "4.6.1. Sending a Query over Do53",
      "section_title": true,
      "ja": "4.6.1. Do53を介してクエリを送信する"
    },
    {
      "indent": 3,
      "text": "For any of the supported encrypted transports E, the recursive resolver SHOULD NOT send a query to X over Do53 if either of the following holds true:",
      "ja": "サポートされている暗号化されたトランスポートEのいずれかについて、次のいずれかが当てはまる場合、再帰リゾルバはDo53を介してXにクエリを送信すべきではありません（SHOULD NOT）。"
    },
    {
      "indent": 6,
      "text": "* E-session[X] is in the established state, or",
      "ja": "* e-session [x]は確立された状態にあります、または"
    },
    {
      "indent": 6,
      "text": "* E-status[X] is success and (T0 - E-last-response[X]) < persistence.",
      "ja": "* e-status [x]は成功であり、（t0-e-last-response [x]）<永続性。"
    },
    {
      "indent": 3,
      "text": "This indicates that one successful connection to a server that the client then closed cleanly would result in the client not sending the next query over Do53.",
      "ja": "これは、クライアントがきれいに閉じたサーバーへの接続が1つ成功すると、クライアントがDO53を超えて次のクエリを送信しないことを示しています。"
    },
    {
      "indent": 3,
      "text": "Otherwise, if there is no outstanding session for any encrypted transport, and the last successful encrypted transport connection was long ago, the recursive resolver sends a query to X over Do53. When it does so, it inserts a handle for the query in Do53-queries[X].",
      "ja": "それ以外の場合、暗号化されたトランスポートのアクティブなセッションがなく、最後に成功した暗号化されたトランスポート接続がずっと前であった場合、再帰リゾルバはDo53を介してXにクエリを送信します。その場合、Do53-queries[X] にクエリのハンドルを挿入します。"
    },
    {
      "indent": 0,
      "text": "4.6.2. Receiving a Response over Do53",
      "section_title": true,
      "ja": "4.6.2. Do53を介した応答を受信する"
    },
    {
      "indent": 3,
      "text": "When any response R (a well-formed DNS response, asynchronous timeout, asynchronous destination port unreachable, etc.) for query Q arrives at the recursive resolver in cleartext sent over Do53 from an authoritative server with IP address X, the recursive resolver should perform the following.",
      "ja": "クエリQの応答R（よく形成されたDNS応答、非同期タイムアウト、非同期宛先ポート到達不能など）が、IPアドレスXを持つ権威サーバーからDo53を介して送信された平文で再帰リゾルバに到着した場合、再帰リゾルバは以下を実行する必要があります。"
    },
    {
      "indent": 3,
      "text": "If Q is not in Do53-queries[X]:",
      "ja": "QがDo53-queries[X]にない場合："
    },
    {
      "indent": 6,
      "text": "* process R no further (do not respond to a cleartext response to a query that is not outstanding).",
      "ja": "* それ以上のプロセスはありません（未解決のクエリに対するクリアテキスト応答に応答しないでください）。"
    },
    {
      "indent": 3,
      "text": "Otherwise, if Q was marked as already processed:",
      "ja": "それ以外の場合、Qが処理済みとしてマークされている場合："
    },
    {
      "indent": 6,
      "text": "* remove Q from Do53-queries[X],",
      "ja": "* Do53-queries[X] からQを削除し、"
    },
    {
      "indent": 6,
      "text": "* discard any content from the response, and process R no further.",
      "ja": "* 応答からコンテンツを破棄し、それ以上の処理を処理しません。"
    },
    {
      "indent": 3,
      "text": "If R is a well-formed DNS response:",
      "ja": "Rが適切に形成されたDNS応答である場合："
    },
    {
      "indent": 6,
      "text": "* remove Q from Do53-queries[X],",
      "ja": "* Do53-queries[X] からQを削除し、"
    },
    {
      "indent": 6,
      "text": "* process R further, and",
      "ja": "* Rをさらに処理し、"
    },
    {
      "indent": 6,
      "text": "* for each supported encrypted transport E:",
      "ja": "* サポートされている各暗号化トランスポートEについて："
    },
    {
      "indent": 12,
      "text": "- if Q is in E-queries[X], then",
      "ja": "- QがE-queries[X]にある場合、"
    },
    {
      "indent": 18,
      "text": "o mark Q as already processed.",
      "ja": "o すでに処理されているQをマークします。"
    },
    {
      "indent": 3,
      "text": "However, if R is malformed or a failure (e.g., a timeout or destination port unreachable), and",
      "ja": "ただし、Rが不正な形式または失敗（例えば、タイムアウトまたは宛先ポート到達不能）である場合、かつ"
    },
    {
      "indent": 6,
      "text": "* if Q is not in any of any-E-queries[X], then",
      "ja": "* Qが any-E-queries[X] のいずれにも含まれていない場合、"
    },
    {
      "indent": 12,
      "text": "- treat this as a failed query (i.e., follow the resolver's policy for unresponsive or non-compliant authoritatives, such as falling back to another authoritative server, returning SERVFAIL to the requesting client, and so on).",
      "ja": "- これを失敗したクエリとして扱います（つまり、別の権威サーバーにフォールバックする、要求クライアントにSERVFAILを返すなど、応答しないまたは非準拠の権威サーバーに対するリゾルバのポリシーに従います）。"
    },
    {
      "indent": 0,
      "text": "4.6.3. Initiating a Connection over Encrypted Transport",
      "section_title": true,
      "ja": "4.6.3. 暗号化されたトランスポートを介した接続の開始"
    },
    {
      "indent": 3,
      "text": "If any E-session[X] is in the established state, the recursive resolver SHOULD NOT initiate a new connection or resume a previous connection to X over Do53 or E, but should instead send queries to X through the existing session (see Section 4.6.8).",
      "ja": "E-session[X] が確立された状態にある場合、再帰リゾルバはDo53またはEを介してXへの新しい接続を開始したり、以前の接続を再開したりすべきではありません（SHOULD NOT）。代わりに、既存のセッションを通じてXにクエリを送信すべきです（セクション4.6.8を参照）。"
    },
    {
      "indent": 3,
      "text": "If the recursive resolver prefers one encrypted transport over another, but only the unpreferred encrypted transport is in the established state, it MAY also initiate a new connection to X over its preferred encrypted transport while concurrently sending the query over the established encrypted transport E.",
      "ja": "再帰リゾルバが1つの暗号化されたトランスポートを別のトランスポートよりも好むが、優先されない暗号化されたトランスポートのみが確立された状態にある場合、確立された暗号化されたトランスポートE上でクエリを同時に送信しながら、優先される暗号化されたトランスポートを介してXへの新しい接続を開始してもかまいません（MAY）。"
    },
    {
      "indent": 3,
      "text": "Before considering whether to initiate a new connection over an encrypted transport, the timer should be examined, and its state possibly refreshed, for encrypted transport E to authoritative IP address X.",
      "ja": "暗号化されたトランスポートを介して新しい接続を開始するかどうかを検討する前に、権威IPアドレスXへの暗号化されたトランスポートEについて、タイマーを調べ、その状態をリフレッシュすべきです。"
    },
    {
      "indent": 6,
      "text": "* If E-session[X] is in state pending, and",
      "ja": "* E-session[X] が保留中の状態であり、かつ"
    },
    {
      "indent": 6,
      "text": "* T0 - E-initiated[X] > E-timeout, then",
      "ja": "* T0 - E-initiated[X] > E-timeout の場合、"
    },
    {
      "indent": 12,
      "text": "- set E-session[X] to null, and",
      "ja": "- E-session[X] をnullに設定し、"
    },
    {
      "indent": 12,
      "text": "- set E-status[X] to timeout.",
      "ja": "- E-status[X] をタイムアウトに設定します。"
    },
    {
      "indent": 3,
      "text": "When resources are available to attempt a new encrypted transport, the recursive resolver should only initiate a new connection to X over E as long as one of the following holds true:",
      "ja": "新しい暗号化されたトランスポートを試みるためにリソースが利用可能な場合、再帰リゾルバは、次のいずれかが真である限り、Eを介してXへの新しい接続を開始すべきです。"
    },
    {
      "indent": 6,
      "text": "* E-status[X] is success, or",
      "ja": "* E-status[X] が成功である、または"
    },
    {
      "indent": 6,
      "text": "* E-status[X] is either fail or timeout and (T0 - E-completed[X]) > damping, or",
      "ja": "* E-status[X] が失敗またはタイムアウトであり、(T0 - E-completed[X]) > damping である、または"
    },
    {
      "indent": 6,
      "text": "* E-status[X] is null and E-initiated[X] is null.",
      "ja": "* E-status[X] がnullで、E-initiated[X] がnullである。"
    },
    {
      "indent": 3,
      "text": "When initiating a session to X over encrypted transport E, if E-resumptions[X] is not empty, one ticket should be popped off the stack and used to try to resume a previous session. Otherwise, the initial ClientHello handshake should not try to resume any session.",
      "ja": "暗号化されたトランスポートEを介してXへのセッションを開始する場合、E-resumptions[X] が空でない場合、1つのチケットをスタックからポップし、前のセッションを再開しようとするために使用する必要があります。それ以外の場合、最初のClientHelloハンドシェイクは、セッションを再開しようとすべきではありません。"
    },
    {
      "indent": 3,
      "text": "When initiating a connection, the recursive resolver should take the following steps:",
      "ja": "接続を開始するとき、再帰リゾルバは次の手順を実行する必要があります。"
    },
    {
      "indent": 6,
      "text": "* set E-initiated[X] to T0,",
      "ja": "* E-initiated[X] をT0に設定し、"
    },
    {
      "indent": 6,
      "text": "* store a handle for the new session (which should have pending state) in E-session[X], and",
      "ja": "* E-session[X] に新しいセッション（保留中の状態であるはずです）のハンドルを保存し、"
    },
    {
      "indent": 6,
      "text": "* insert a handle for the query that prompted this connection in E-queries[X], with status unsent or early, as appropriate (see below).",
      "ja": "* E-queries[X] にこの接続を促したクエリのハンドルを、必要に応じて unsent または early のステータスで挿入します（以下を参照）。"
    },
    {
      "indent": 0,
      "text": "4.6.3.1. Early Data",
      "section_title": true,
      "ja": "4.6.3.1. 初期データ"
    },
    {
      "indent": 3,
      "text": "Modern encrypted transports like TLS 1.3 offer the chance to send \"early data\" from the client in the initial ClientHello in some contexts. A recursive resolver that initiates a connection over an encrypted transport according to this guidance in a context where early data is possible SHOULD send the DNS query that prompted the connection in the early data, according to the sending guidance in Section 4.6.8.",
      "ja": "TLS 1.3のような最新の暗号化されたトランスポートは、一部のコンテキストで最初のClientHelloでクライアントから「初期データ」を送信する機会を提供します。初期データが可能なコンテキストでこのガイダンスに従って暗号化されたトランスポートを介して接続を開始する再帰リゾルバは、セクション4.6.8の送信ガイダンスに従って、接続を促したDNSクエリを初期データで送信すべきです（SHOULD）。"
    },
    {
      "indent": 3,
      "text": "If it does so, the status of Q in E-queries[X] should be set to early instead of unsent.",
      "ja": "そうする場合、E-queries[X] のQのステータスは、unsentではなくearlyに設定する必要があります。"
    },
    {
      "indent": 0,
      "text": "4.6.3.2. Resumption Tickets",
      "section_title": true,
      "ja": "4.6.3.2. 再開チケット"
    },
    {
      "indent": 3,
      "text": "When initiating a new connection (whether by resuming an old session or not), the recursive resolver SHOULD request a session resumption ticket from the authoritative server. If the authoritative server supplies a resumption ticket, the recursive resolver pushes it into the stack at E-resumptions[X].",
      "ja": "新しい接続を開始するとき（古いセッションを再開するかどうかにかかわらず）、再帰リゾルバは権威サーバーからセッション再開チケットを要求すべきです（SHOULD）。権威サーバーが再開チケットを提供する場合、再帰リゾルバはそれを E-resumptions[X] のスタックにプッシュします。"
    },
    {
      "indent": 0,
      "text": "4.6.3.3. Server Name Indication",
      "section_title": true,
      "ja": "4.6.3.3. サーバー名の表示"
    },
    {
      "indent": 3,
      "text": "For modern encrypted transports like TLS 1.3, most client implementations expect to send a Server Name Indication (SNI) in the ClientHello.",
      "ja": "TLS 1.3のような最新の暗号化されたトランスポートの場合、ほとんどのクライアントの実装は、ClientHelloでサーバー名表示（SNI）を送信することを期待しています。"
    },
    {
      "indent": 3,
      "text": "There are two complications with selecting or sending an SNI in this unilateral probing.",
      "ja": "この一方的なプロービングでSNIを選択または送信することには、2つの複雑な問題があります。"
    },
    {
      "indent": 6,
      "text": "* Some authoritative servers are known by more than one name; selecting a single name to use for a given connection may be difficult or impossible.",
      "ja": "* 一部の権威サーバーは、複数の名前で知られています。特定の接続に使用する単一の名前を選択することは困難または不可能です。"
    },
    {
      "indent": 6,
      "text": "* In most configurations, the contents of the SNI field are exposed on the wire to a passive adversary. This potentially reveals additional information about which query is being made based on the NS of the query itself.",
      "ja": "* ほとんどの構成では、SNIフィールドの内容がワイヤー上でパッシブな攻撃者にさらされます。これにより、クエリ自体のNSに基づいてどのクエリが作成されているかについての追加情報が潜在的に明らかになります。"
    },
    {
      "indent": 3,
      "text": "To avoid additional leakage and complexity, a recursive resolver following this guidance SHOULD NOT send an SNI to the authoritative server when attempting encrypted transport.",
      "ja": "追加の漏れと複雑さを避けるために、このガイダンスに従う再帰リゾルバは、暗号化されたトランスポートを試みる際に権威サーバーにSNIを送信すべきではありません（SHOULD NOT）。"
    },
    {
      "indent": 3,
      "text": "If the recursive resolver needs to send an SNI to the authoritative server for some reason not found in this document, using Encrypted ClientHello ([TLS-ECH]) would reduce leakage.",
      "ja": "再帰リゾルバがこのドキュメントに記載されていない理由で権威サーバーにSNIを送信する必要がある場合、Encrypted ClientHello ([TLS-ECH]) を使用すると漏れが減少します。"
    },
    {
      "indent": 0,
      "text": "4.6.3.4. Authoritative Server Authentication",
      "section_title": true,
      "ja": "4.6.3.4. 権威あるサーバー認証"
    },
    {
      "indent": 3,
      "text": "Because this probing policy is unilateral and opportunistic, the client connecting under this policy MUST accept any certificate presented by the server. If the client cannot verify the server's identity, it MAY use that information for reporting, logging, or other analysis purposes; however, it MUST NOT reject the connection due to the authentication failure, as the result would be falling back to cleartext, which would leak the content of the session to a passive network monitor.",
      "ja": "このプロービングポリシーは一方的で日和見的であるため、このポリシーに基づいて接続するクライアントは、サーバーが提示した証明書を受け入れなければなりません（MUST）。クライアントがサーバーのIDを確認できない場合、その情報をレポート、ロギング、またはその他の分析の目的に使用してもかまいません（MAY）。ただし、結果が平文にフォールバックすることになり、セッションのコンテンツがパッシブネットワークモニターに漏れるため、認証失敗のために接続を拒否してはなりません（MUST NOT）。"
    },
    {
      "indent": 0,
      "text": "4.6.4. Establishing an Encrypted Transport Connection",
      "section_title": true,
      "ja": "4.6.4. 暗号化されたトランスポート接続の確立"
    },
    {
      "indent": 3,
      "text": "When an encrypted transport connection actually completes (e.g., the TLS handshake completes) at time T1, the recursive resolver sets E-completed[X] to T1 and does the following.",
      "ja": "暗号化されたトランスポート接続が実際に完了すると（たとえば、TLSハンドシェイクが完了する）、時間T1で、再帰リゾルバは E-completed[X] をT1に設定し、次のことを行います。"
    },
    {
      "indent": 3,
      "text": "If the handshake completed successfully, the recursive resolver:",
      "ja": "ハンドシェイクが正常に完了した場合、再帰リゾルバは："
    },
    {
      "indent": 6,
      "text": "* updates E-session[X] so that it is in state established,",
      "ja": "* E-session[X] を更新して、状態が established になるようにし、"
    },
    {
      "indent": 6,
      "text": "* sets E-status[X] to success,",
      "ja": "* E-status[X] を success に設定し、"
    },
    {
      "indent": 6,
      "text": "* sets E-last-response[X] to T1,",
      "ja": "* E-last-response[X] をT1に設定し、"
    },
    {
      "indent": 6,
      "text": "* sets E-completed[X] to T1, and",
      "ja": "* E-completed[X] をT1に設定し、"
    },
    {
      "indent": 6,
      "text": "* for each query Q in E-queries[X]:",
      "ja": "* E-queries[X] の各クエリQについて："
    },
    {
      "indent": 12,
      "text": "- if early data was accepted and Q is early, then",
      "ja": "- 初期データが受け入れられ、Qが early の場合、"
    },
    {
      "indent": 18,
      "text": "o sets the status of Q to sent.",
      "ja": "o Qのステータスを sent に設定します。"
    },
    {
      "indent": 12,
      "text": "- Otherwise:",
      "ja": "- さもないと："
    },
    {
      "indent": 18,
      "text": "o sends Q through the session (see Section 4.6.8) and sets the status of Q to sent.",
      "ja": "o セッションを通じてQを送信し（セクション4.6.8を参照）、Qのステータスを sent に設定します。"
    },
    {
      "indent": 0,
      "text": "4.6.5. Failing to Establish an Encrypted Transport Connection",
      "section_title": true,
      "ja": "4.6.5. 暗号化されたトランスポート接続の確立の失敗"
    },
    {
      "indent": 3,
      "text": "If, at time T2, an encrypted transport handshake completes with a failure (e.g., a TLS alert):",
      "ja": "時間T2で、暗号化されたトランスポートハンドシェイクが失敗して完了した場合（例：TLSアラート）："
    },
    {
      "indent": 6,
      "text": "* set E-session[X] to null,",
      "ja": "* E-session[X] をnullに設定し、"
    },
    {
      "indent": 6,
      "text": "* set E-status[X] to fail,",
      "ja": "* E-status[X] を fail に設定し、"
    },
    {
      "indent": 6,
      "text": "* set E-completed[X] to T2, and",
      "ja": "* E-completed[X] をT2に設定し、"
    },
    {
      "indent": 6,
      "text": "* for each query Q in E-queries[X]:",
      "ja": "* E-queries[X] の各クエリQについて："
    },
    {
      "indent": 12,
      "text": "- if Q is not present in any other any-E-queries[X] or in Do53-queries[X], add Q to Do53-queries[X] and send query Q to X over Do53.",
      "ja": "- Qが他の any-E-queries[X] または Do53-queries[X] に存在しない場合、Qを Do53-queries[X] に追加し、クエリQをDo53を介してXに送信します。"
    },
    {
      "indent": 3,
      "text": "Note that this failure will trigger the recursive resolver to fall back to cleartext queries to the authoritative server at IP address X. It will retry encrypted transport to X once the damping timer has elapsed.",
      "ja": "この障害により、再帰リゾルバがIPアドレスXの権威サーバーへの平文クエリにフォールバックするようにトリガーされることに注意してください。減衰タイマーが経過したら、Xへの暗号化されたトランスポートを再試行します。"
    },
    {
      "indent": 0,
      "text": "4.6.6. Encrypted Transport Failure",
      "section_title": true,
      "ja": "4.6.6. 暗号化されたトランスポートの障害"
    },
    {
      "indent": 3,
      "text": "Once established, an encrypted transport might fail for a number of reasons (e.g., decryption failure or improper protocol sequence).",
      "ja": "確立されると、暗号化されたトランスポートがいくつかの理由で失敗する可能性があります（例：復号化の失敗または不適切なプロトコルシーケンス）。"
    },
    {
      "indent": 3,
      "text": "If this happens:",
      "ja": "これが発生した場合："
    },
    {
      "indent": 6,
      "text": "* set E-session[X] to null,",
      "ja": "* E-session[X] をnullに設定し、"
    },
    {
      "indent": 6,
      "text": "* set E-status[X] to fail, and",
      "ja": "* E-status[X] を fail に設定し、"
    },
    {
      "indent": 6,
      "text": "* for each query Q in E-queries[X]:",
      "ja": "* E-queries[X] の各クエリQについて："
    },
    {
      "indent": 12,
      "text": "- if Q is not present in any other any-E-queries[X] or in Do53-queries[X], add Q to Do53-queries[X] and send query Q to X over Do53.",
      "ja": "- Qが他の any-E-queries[X] または Do53-queries[X] に存在しない場合、Qを Do53-queries[X] に追加し、クエリQをDo53を介してXに送信します。"
    },
    {
      "indent": 3,
      "text": "Note that this failure will trigger the recursive resolver to fall back to cleartext queries to the authoritative server at IP address X. It will retry encrypted transport to X once the damping timer has elapsed.",
      "ja": "この障害により、再帰リゾルバがIPアドレスXの権威サーバーへの平文クエリにフォールバックするようにトリガーされることに注意してください。減衰タイマーが経過したら、Xへの暗号化されたトランスポートを再試行します。"
    },
    {
      "indent": 0,
      "text": "4.6.7. Handling Clean Shutdown of an Encrypted Transport Connection",
      "section_title": true,
      "ja": "4.6.7. 暗号化されたトランスポート接続のクリーンシャットダウンの処理"
    },
    {
      "indent": 3,
      "text": "At time T3, the recursive resolver may find that authoritative server X cleanly closes an existing outstanding connection (most likely due to resource exhaustion, see Section 3.4).",
      "ja": "時間T3で、再帰リゾルバは、権威サーバーXが既存のアクティブな接続をきれいに閉じることを発見する場合があります（おそらくリソースの枯渇が原因です。セクション3.4を参照）。"
    },
    {
      "indent": 3,
      "text": "When this happens:",
      "ja": "これが起こるとき："
    },
    {
      "indent": 6,
      "text": "* set E-session[X] to null, and",
      "ja": "* E-session[X] をnullに設定し、"
    },
    {
      "indent": 6,
      "text": "* for each query Q in E-queries[X]:",
      "ja": "* E-queries[X] の各クエリQについて："
    },
    {
      "indent": 12,
      "text": "- if Q is not present in any other any-E-queries[X] or in Do53-queries[X], add Q to Do53-queries[X] and send query Q to X over Do53.",
      "ja": "- Qが他の any-E-queries[X] または Do53-queries[X] に存在しない場合、Qを Do53-queries[X] に追加し、クエリQをDo53を介してXに送信します。"
    },
    {
      "indent": 3,
      "text": "Note that this premature shutdown will trigger the recursive resolver to fall back to cleartext queries to the authoritative server at IP address X. Any subsequent query to X will retry the encrypted connection promptly.",
      "ja": "この時期尚早のシャットダウンにより、再帰リゾルバがIPアドレスXの権威サーバーへの平文クエリにフォールバックするようにトリガーされることに注意してください。Xへの後続のクエリは、暗号化された接続を速やかに再試行します。"
    },
    {
      "indent": 0,
      "text": "4.6.8. Sending a Query over Encrypted Transport",
      "section_title": true,
      "ja": "4.6.8. 暗号化されたトランスポートを介したクエリの送信"
    },
    {
      "indent": 3,
      "text": "When sending a query to an authoritative server over encrypted transport at time T4, the recursive resolver should take a few reasonable steps to ensure privacy and efficiency. After sending query Q, the recursive resolver should:",
      "ja": "時間T4で暗号化されたトランスポートを介して権威サーバーにクエリを送信する場合、再帰リゾルバはプライバシーと効率を確保するためにいくつかの合理的な手順を実行する必要があります。クエリQを送信した後、再帰リゾルバは次のようにする必要があります。"
    },
    {
      "indent": 6,
      "text": "* Ensure that Q's state in E-queries[X] is set to sent.",
      "ja": "* E-queries[X] のQの状態が sent に設定されていることを確認します。"
    },
    {
      "indent": 6,
      "text": "* Set E-last-activity[X] to T4.",
      "ja": "* E-last-activity[X] をT4に設定します。"
    },
    {
      "indent": 3,
      "text": "The recursive resolver should also consider the guidance in the following subsections.",
      "ja": "再帰リゾルバは、次のサブセクションのガイダンスも考慮する必要があります。"
    },
    {
      "indent": 0,
      "text": "4.6.8.1. Pad Queries to Mitigate Traffic Analysis",
      "section_title": true,
      "ja": "4.6.8.1. トラフィック分析を軽減するためのパッドクエリ"
    },
    {
      "indent": 3,
      "text": "To increase the anonymity set for each query, the recursive resolver SHOULD use a sensible padding mechanism for all queries it sends. Specifically, a DoT client SHOULD use EDNS0 padding [RFC7830], and a DoQ client SHOULD follow the guidance in Section 5.4 of [RFC9250]. How much to pad is out of scope of this document, but a reasonable suggestion can be found in [RFC8467].",
      "ja": "クエリごとに匿名性セットを増やすには、再帰リゾルバは送信するすべてのクエリに対して賢明なパディングメカニズムを使用すべきです（SHOULD）。具体的には、DoTクライアントはEDNS0パディング[RFC7830]を使用すべきであり（SHOULD）、DoQクライアントは[RFC9250]のセクション5.4のガイダンスに従うべきです（SHOULD）。どれだけパディングするかはこのドキュメントの範囲外ですが、[RFC8467]に合理的な提案があります。"
    },
    {
      "indent": 0,
      "text": "4.6.8.2. Send Queries in Separate Channels",
      "section_title": true,
      "ja": "4.6.8.2. 別々のチャネルでクエリを送信します"
    },
    {
      "indent": 3,
      "text": "When multiple queries are multiplexed on a single encrypted transport to a single authoritative server, the recursive resolver SHOULD pipeline queries and MUST be capable of receiving responses out of order. For guidance on how to best achieve this on a given encrypted transport, see Section 6.2.1.1 of [RFC7766] (for DoT) and Section 5.6 of [RFC9250] (for DoQ).",
      "ja": "単一の権威サーバーへの単一の暗号化されたトランスポートで複数のクエリが多重化されている場合、再帰リゾルバはクエリをパイプライン化すべきであり（SHOULD）、順序不同で応答を受信できなければなりません（MUST）。特定の暗号化されたトランスポートでこれを最大限に達成する方法に関するガイダンスについては、[RFC7766]のセクション6.2.1.1（DoT）および[RFC9250]のセクション5.6（DoQ）を参照してください。"
    },
    {
      "indent": 0,
      "text": "4.6.9. Receiving a Response over Encrypted Transport",
      "section_title": true,
      "ja": "4.6.9. 暗号化されたトランスポートを介した応答の受信"
    },
    {
      "indent": 3,
      "text": "Even though session-level events on encrypted transports like clean shutdown (see Section 4.6.7) or encrypted transport failure (see Section 4.6.6) can happen, some events happen on encrypted transports that are specific to a query and are not session-wide. This subsection describes how the recursive resolver deals with events related to a specific query.",
      "ja": "クリーンシャットダウン（セクション4.6.7を参照）や暗号化されたトランスポートの失敗（セクション4.6.6を参照）などの暗号化されたトランスポートでのセッションレベルのイベントが発生する可能性がありますが、クエリに固有でセッション全体ではないイベントが暗号化されたトランスポートで発生することもあります。このサブセクションでは、再帰リゾルバが特定のクエリに関連するイベントをどのように処理するかについて説明します。"
    },
    {
      "indent": 3,
      "text": "When a query-specific response R (a well-formed DNS response or an asynchronous timeout) associated with query Q arrives at the recursive resolver over encrypted transport E from an authoritative server with IP address X at time T5, the recursive resolver should perform the following.",
      "ja": "時間T5で、IPアドレスXを持つ権威サーバーから暗号化されたトランスポートEを介して、クエリQに関連付けられたクエリ固有の応答R（よく形成されたDNS応答または非同期タイムアウト）が再帰リゾルバに到着した場合、再帰リゾルバは以下を実行する必要があります。"
    },
    {
      "indent": 3,
      "text": "If Q is not in E-queries[X]:",
      "ja": "QがE-queries[X]にない場合："
    },
    {
      "indent": 6,
      "text": "* discard the response and process R no further (do not respond to an encrypted response to a query that is not outstanding).",
      "ja": "* 応答を破棄し、Rをそれ以上処理しません（未処理のクエリに対する暗号化された応答に応答しないでください）。"
    },
    {
      "indent": 3,
      "text": "Otherwise:",
      "ja": "さもないと："
    },
    {
      "indent": 6,
      "text": "* remove Q from E-queries[X],",
      "ja": "* E-queries[X] からQを削除し、"
    },
    {
      "indent": 6,
      "text": "* set E-last-activity[X] to T5, and",
      "ja": "* E-last-activity[X] をT5に設定し、"
    },
    {
      "indent": 6,
      "text": "* set E-last-response[X] to T5.",
      "ja": "* E-last-response[X] をT5に設定します。"
    },
    {
      "indent": 3,
      "text": "If Q was marked as already processed:",
      "ja": "Qが処理済みとしてマークされている場合："
    },
    {
      "indent": 6,
      "text": "* discard the response and process the response no further.",
      "ja": "* 応答を破棄し、応答をそれ以上処理しません。"
    },
    {
      "indent": 3,
      "text": "If R is a well-formed DNS response:",
      "ja": "Rが適切に形成されたDNS応答である場合："
    },
    {
      "indent": 6,
      "text": "* process R further, and",
      "ja": "* Rをさらに処理し、"
    },
    {
      "indent": 6,
      "text": "* for each supported encrypted transport N other than E:",
      "ja": "* E以外のサポートされている各暗号化トランスポートNについて："
    },
    {
      "indent": 12,
      "text": "- if Q is in N-queries[X], then",
      "ja": "- QがN-queries[X]にある場合、"
    },
    {
      "indent": 18,
      "text": "o mark Q as already processed.",
      "ja": "o Qを処理済みとしてマークします。"
    },
    {
      "indent": 6,
      "text": "* If Q is in Do53-queries[X]:",
      "ja": "* QがDo53-queries[X]にある場合："
    },
    {
      "indent": 12,
      "text": "- mark Q as already processed.",
      "ja": "o Qを処理済みとしてマークします。"
    },
    {
      "indent": 3,
      "text": "However, if R is malformed or a failure (e.g., timeout), and",
      "ja": "ただし、Rが不正な形式または失敗（例：タイムアウト）である場合、かつ"
    },
    {
      "indent": 6,
      "text": "* if Q is not in Do53-queries[X] or in any of any-E-queries[X], then",
      "ja": "* QがDo53-queries[X]または any-E-queries[X] のいずれにもない場合、"
    },
    {
      "indent": 12,
      "text": "- treat this as a failed query (i.e., follow the resolver's policy for unresponsive or non-compliant authoritative servers, such as falling back to another authoritative server, returning SERVFAIL to the requesting client, and so on).",
      "ja": "- これを失敗したクエリとして扱います（つまり、別の権威サーバーにフォールバックする、要求クライアントにSERVFAILを返すなど、応答しないまたは非準拠の権威サーバーに対するリゾルバのポリシーに従います）。"
    },
    {
      "indent": 0,
      "text": "4.6.10. Resource Exhaustion",
      "section_title": true,
      "ja": "4.6.10. リソースの枯渇"
    },
    {
      "indent": 3,
      "text": "To keep resources under control, a recursive resolver should proactively manage outstanding encrypted connections. Section 5.5 of [RFC9250] offers useful guidance for clients managing DoQ connections. Section 3.4 of [RFC7858] offers useful guidance for clients managing DoT connections.",
      "ja": "リソースを制御するために、再帰リゾルバは、アクティブな暗号化された接続を積極的に管理する必要があります。[RFC9250]のセクション5.5は、DoQ接続を管理するクライアントに有用なガイダンスを提供します。[RFC7858]のセクション3.4は、DoT接続を管理するクライアントに有用なガイダンスを提供します。"
    },
    {
      "indent": 3,
      "text": "Even with sensible connection management, a recursive resolver doing unilateral probing may find resources unexpectedly scarce and may need to close some outstanding connections.",
      "ja": "賢明な接続管理があっても、一方的なプロービングを行う再帰リゾルバは、リソースが予想外に不足していることがわかり、いくつかのアクティブな接続を閉じる必要がある場合があります。"
    },
    {
      "indent": 3,
      "text": "In such a situation, the recursive resolver SHOULD use a reasonable prioritization scheme to close outstanding connections.",
      "ja": "このような状況では、再帰リゾルバは合理的な優先順位付けスキームを使用して、アクティブな接続を閉じるべきです（SHOULD）。"
    },
    {
      "indent": 3,
      "text": "One reasonable prioritization scheme would be to close outstanding established sessions based on E-last-activity[X] (i.e, the oldest timestamp gets closed first).",
      "ja": "合理的な優先順位付けスキームの1つは、E-last-activity[X]（つまり、最も古いタイムスタンプが最初に閉じられる）に基づいて、アクティブな確立されたセッションを閉じることです。"
    },
    {
      "indent": 3,
      "text": "Note that when resources are limited, a recursive resolver following this guidance may also choose not to initiate new connections for encrypted transport.",
      "ja": "リソースが制限されている場合、このガイダンスに従う再帰リゾルバは、暗号化されたトランスポートの新しい接続を開始しないことを選択する場合もあることに注意してください。"
    },
    {
      "indent": 0,
      "text": "4.6.11. Maintaining Connections",
      "section_title": true,
      "ja": "4.6.11. 接続の維持"
    },
    {
      "indent": 3,
      "text": "Some recursive resolvers looking to amortize connection costs and minimize latency MAY choose to synthesize queries to a particular authoritative server to keep an encrypted transport session active.",
      "ja": "接続コストを償却してレイテンシを最小限に抑えることを検討しているいくつかの再帰リゾルバは、特定の権威サーバーにクエリを合成して、暗号化されたトランスポートセッションをアクティブに保つことを選択する場合があります（MAY）。"
    },
    {
      "indent": 3,
      "text": "A recursive resolver that adopts this approach should try to align the synthesized queries with other optimizations. For example, a recursive resolver that \"pre-fetches\" a particular resource record to keep its cache \"hot\" can send that query over an established encrypted transport session.",
      "ja": "このアプローチを採用する再帰リゾルバは、合成されたクエリを他の最適化と整合させるように努めるべきです。たとえば、キャッシュを「ホット」に保つために特定のリソースレコードを「プリフェッチ」する再帰リゾルバは、確立された暗号化されたトランスポートセッションでそのクエリを送信できます。"
    },
    {
      "indent": 0,
      "text": "4.6.12. Additional Tuning",
      "section_title": true,
      "ja": "4.6.12. 追加のチューニング"
    },
    {
      "indent": 3,
      "text": "A recursive resolver's state table for an authoritative server can contain additional information beyond what is described above. The recursive resolver might use that additional state to change the way it interacts with the authoritative server in the future. Some examples of additional states include the following.",
      "ja": "権威サーバー用の再帰リゾルバの状態テーブルには、上記のものを超えて追加情報を含めることができます。再帰リゾルバは、その追加の状態を使用して、将来の権威サーバーとの対話方法を変更する可能性があります。追加の状態のいくつかの例には、以下が含まれます。"
    },
    {
      "indent": 6,
      "text": "* Whether the server accepts \"early data\" over a transport such as DoQ.",
      "ja": "* サーバーがDoQなどのトランスポートを介して「初期データ」を受け入れるかどうか。"
    },
    {
      "indent": 6,
      "text": "* Whether the server fails to respond to queries after the handshake succeeds.",
      "ja": "* ハンドシェイクが成功した後、サーバーがクエリに応答できないかどうか。"
    },
    {
      "indent": 6,
      "text": "* Tracking the round-trip time of queries to the server.",
      "ja": "* サーバーへのクエリの往復時間を追跡します。"
    },
    {
      "indent": 6,
      "text": "* Tracking the number of timeouts (compared to the number of successful queries).",
      "ja": "* タイムアウトの数を追跡します（クエリの成功数と比較）。"
    },
    {
      "indent": 0,
      "text": "5. IANA Considerations",
      "section_title": true,
      "ja": "5. IANAの考慮事項"
    },
    {
      "indent": 3,
      "text": "This document has no IANA actions.",
      "ja": "このドキュメントにはIANAアクションがありません。"
    },
    {
      "indent": 0,
      "text": "6. Privacy Considerations",
      "section_title": true,
      "ja": "6. プライバシーに関する考慮事項"
    },
    {
      "indent": 0,
      "text": "6.1. Server Name Indication",
      "section_title": true,
      "ja": "6.1. サーバー名の表示"
    },
    {
      "indent": 3,
      "text": "A recursive resolver querying an authoritative server over DoT or DoQ that sends a Server Name Indication (SNI) in the clear in the cryptographic handshake leaks information about the intended query to a passive network observer.",
      "ja": "暗号化ハンドシェイクで平文でサーバー名表示（SNI）を送信するDoTまたはDoQを介して権威サーバーをクエリする再帰リゾルバは、パッシブなネットワーク監視者に意図したクエリに関する情報を漏らします。"
    },
    {
      "indent": 3,
      "text": "In particular, if two different zones refer to the same nameserver IP addresses via differently named NS records, a passive network observer can distinguish the queries to one zone from the queries to the other.",
      "ja": "特に、2つの異なるゾーンが異なる名前のNSレコードを介して同じネームサーバーIPアドレスを参照する場合、パッシブなネットワーク監視者は、一方のゾーンへのクエリと他方のゾーンへのクエリを区別できます。"
    },
    {
      "indent": 3,
      "text": "Omitting SNI entirely, or using Encrypted ClientHello to hide the intended SNI, avoids this additional leakage. However, a series of queries that leak this information is still an improvement over cleartext.",
      "ja": "SNIを完全に省略するか、暗号化されたClientHelloを使用して意図したSNIを非表示にすると、この追加の漏れを避けます。ただし、この情報をリークする一連のクエリは、平文よりも改善されています。"
    },
    {
      "indent": 0,
      "text": "6.2. Modeling the Probability of Encryption",
      "section_title": true,
      "ja": "6.2. 暗号化の確率のモデリング"
    },
    {
      "indent": 3,
      "text": "Given that there are many parameter choices that can be made by recursive resolvers and authoritative servers, it is reasonable to consider the probability that queries would be encrypted. Such a measurement would also certainly be affected by the types of queries being sent by the recursive resolver, which, in turn, is also related to the types of queries that are sent to the recursive resolver by the stub resolvers and forwarders downstream. Doing this type of research would be valuable to the DNS community after initial implementation by a variety of recursive resolvers and authoritative servers because it would help assess the overall DNS privacy value of implementing the protocol. Thus, it would be useful if recursive resolvers and authoritative servers reported percentages of queries sent and received over the different transports.",
      "ja": "再帰リゾルバと権威サーバーによって行われる可能性のある多くのパラメーターの選択があることを考えると、クエリが暗号化される確率を考慮することは合理的です。このような測定は、再帰リゾルバによって送信されるクエリの種類によって確かに影響を受けるでしょう。これは、スタブリゾルバと下流のフォワーダーによって再帰リゾルバに送信されるクエリのタイプにも関連しています。このタイプの研究を行うことは、プロトコルの実装の全体的なDNSプライバシー値を評価するのに役立つため、さまざまな再帰リゾルバと権威サーバーによる最初の実装後のDNSコミュニティにとって価値があります。したがって、再帰リゾルバと権威サーバーが、異なるトランスポートで送信および受信されたクエリの割合を報告すると役立ちます。"
    },
    {
      "indent": 0,
      "text": "7. Security Considerations",
      "section_title": true,
      "ja": "7. セキュリティに関する考慮事項"
    },
    {
      "indent": 3,
      "text": "The guidance in this document provides defense against passive network monitors for most queries. It does not defend against active attackers. It can also leak some queries and their responses due to Happy Eyeballs optimizations ([RFC8305]) when the recursive resolver's cache is cold.",
      "ja": "このドキュメントのガイダンスは、ほとんどのクエリに対してパッシブなネットワーク監視者に対する防御を提供します。アクティブな攻撃者に対しては防御しません。また、再帰リゾルバのキャッシュがコールドのときに、Happy Eyeballsの最適化（[RFC8305]）のために、いくつかのクエリとその応答を漏らす可能性があります。"
    },
    {
      "indent": 3,
      "text": "Implementation of the guidance in this document should increase deployment of opportunistic encrypted DNS transport between recursive resolvers and authoritative servers at little operational risk.",
      "ja": "このドキュメントのガイダンスの実装は、再帰リゾルバと権威サーバー間の日和見的な暗号化DNSトランスポートの展開を、運用上のリスクをほとんど伴わずに増やすはずです。"
    },
    {
      "indent": 3,
      "text": "However, implementers cannot rely on the guidance in this document for robust defense against active attackers: they should treat it as a stepping stone en route to stronger defense.",
      "ja": "ただし、実装者は、アクティブな攻撃者に対する堅牢な防御のために、このドキュメントのガイダンスに依存することはできません。彼らは、より強力な防御への途中で踏み台として扱う必要があります。"
    },
    {
      "indent": 3,
      "text": "In particular, a recursive resolver following the guidance in this document can easily be forced by an active attacker to fall back to cleartext DNS queries. Or, an active attacker could position itself as a machine-in-the-middle, which the recursive resolver would not defend against or detect due to lack of server authentication. Defending against these attacks without risking additional unexpected protocol failures would require signaling and coordination that are out of scope for this document.",
      "ja": "特に、このドキュメントのガイダンスに従う再帰リゾルバは、アクティブな攻撃者によって簡単に平文DNSクエリにフォールバックさせられる可能性があります。または、アクティブな攻撃者は自分自身を中間者として位置付けることができますが、サーバー認証の欠如のために再帰リゾルバは防御したり検出したりしません。追加の予期しないプロトコルの障害を危険にさらすことなく、これらの攻撃に対して防御するには、このドキュメントの範囲外のシグナリングと調整が必要です。"
    },
    {
      "indent": 3,
      "text": "This guidance is only one part of operating a privacy-preserving DNS ecosystem. A privacy-preserving recursive resolver should adopt other practices as well, such as QNAME minimization ([RFC9156]), local root zone ([RFC8806]), etc., to reduce the overall leakage of query information that could infringe on the client's privacy.",
      "ja": "このガイダンスは、プライバシーを保護するDNSエコシステムの運用の一部にすぎません。プライバシーを保護する再帰リゾルバは、クライアントのプライバシーを侵害する可能性のあるクエリ情報の全体的な漏れを減らすために、QNAME最小化（[RFC9156]）、ローカルルートゾーン（[RFC8806]）など、他のプラクティスも採用すべきです。"
    },
    {
      "indent": 0,
      "text": "8. Operational Considerations",
      "section_title": true,
      "ja": "8. 運用上の考慮事項"
    },
    {
      "indent": 3,
      "text": "As recursive resolvers implement this protocol, authoritative servers will see more probing on port 853 of IP addresses that are associated with NS records. Such probing of an authoritative server should generally not cause any significant problems. If the authoritative server is not supporting this protocol, it will not respond on port 853; if it is supporting this protocol, it will act accordingly.",
      "ja": "再帰リゾルバがこのプロトコルを実装すると、権威サーバーは、NSレコードに関連付けられているIPアドレスのポート853でより多くのプロービングを受けることになります。権威サーバーのこのようなプロービングは、一般に重大な問題を引き起こさないはずです。権威サーバーがこのプロトコルをサポートしていない場合、ポート853で応答しません。このプロトコルをサポートしている場合、それに応じて動作します。"
    },
    {
      "indent": 3,
      "text": "However, a system that is a public recursive resolver that supports DoT and/or DoQ may also have an IP address that is associated with NS records. This could be accidental (such as a glue record with the wrong target address) or intentional. In such a case, a recursive resolver following this protocol will look for authoritative answers to ports 53 and 853 on that IP address. Additionally, the DNS server answering on port 853 would need to be able to differentiate queries for recursive answers from queries for authoritative answers (e.g., by having the authoritative server handle all queries that have the Recursion Desired (RD) flag unset).",
      "ja": "ただし、DoTおよび/またはDoQをサポートするパブリック再帰リゾルバであるシステムには、NSレコードに関連付けられたIPアドレスも持っている場合があります。これは、偶発的（ターゲットアドレスが間違っているグルーレコードなど）または意図的なものである可能性があります。そのような場合、このプロトコルに従う再帰リゾルバは、そのIPアドレスのポート53および853に対する権威ある応答を探します。さらに、ポート853で応答するDNSサーバーは、権威ある応答のクエリと再帰的な応答のクエリを区別できる必要があります（たとえば、権威サーバーにRecursion Desired (RD) フラグがセットされていないすべてのクエリを処理させることにより）。"
    },
    {
      "indent": 3,
      "text": "As discussed in Section 7, the protocol described in this document provides no defense against active attackers. On a network where a captive portal is operating, some communications may be actively intercepted (e.g., when the network tries to redirect a user to complete an interaction with a captive portal server). A recursive resolver operating on a node that performs captive portal detection and Internet connectivity checks SHOULD delay encrypted transport probes to authoritative servers until after the node's Internet connectivity check policy has been satisfied.",
      "ja": "セクション7で説明したように、このドキュメントで説明されているプロトコルは、アクティブな攻撃者に対する防御を提供しません。キャプティブポータルが動作しているネットワークでは、一部の通信が積極的に傍受される場合があります（たとえば、ネットワークがユーザーをリダイレクトしてキャプティブポータルサーバーとの対話を完了しようとする場合）。キャプティブポータル検出とインターネット接続チェックを実行するノードで動作する再帰リゾルバは、ノードのインターネット接続チェックポリシーが満たされるまで、権威サーバーへの暗号化されたトランスポートプローブを遅らせるべきです（SHOULD）。"
    },
    {
      "indent": 0,
      "text": "9. References",
      "section_title": true,
      "ja": "9. 参考文献"
    },
    {
      "indent": 0,
      "text": "9.1. Normative References",
      "section_title": true,
      "ja": "9.1. 引用文献"
    },
    {
      "indent": 3,
      "text": "[RFC2119]  Bradner, S., \"Key words for use in RFCs to Indicate\n           Requirement Levels\", BCP 14, RFC 2119,\n           DOI 10.17487/RFC2119, March 1997,\n           <https://www.rfc-editor.org/info/rfc2119>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "[RFC7301]  Friedl, S., Popov, A., Langley, A., and E. Stephan,\n           \"Transport Layer Security (TLS) Application-Layer Protocol\n           Negotiation Extension\", RFC 7301, DOI 10.17487/RFC7301,\n           July 2014, <https://www.rfc-editor.org/info/rfc7301>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "[RFC7858]  Hu, Z., Zhu, L., Heidemann, J., Mankin, A., Wessels, D.,\n           and P. Hoffman, \"Specification for DNS over Transport\n           Layer Security (TLS)\", RFC 7858, DOI 10.17487/RFC7858, May\n           2016, <https://www.rfc-editor.org/info/rfc7858>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "[RFC8174]  Leiba, B., \"Ambiguity of Uppercase vs Lowercase in RFC\n           2119 Key Words\", BCP 14, RFC 8174, DOI 10.17487/RFC8174,\n           May 2017, <https://www.rfc-editor.org/info/rfc8174>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "[RFC9250]  Huitema, C., Dickinson, S., and A. Mankin, \"DNS over\n           Dedicated QUIC Connections\", RFC 9250,\n           DOI 10.17487/RFC9250, May 2022,\n           <https://www.rfc-editor.org/info/rfc9250>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 0,
      "text": "9.2. Informative References",
      "section_title": true,
      "ja": "9.2. 参考引用"
    },
    {
      "indent": 3,
      "text": "[RFC1035]  Mockapetris, P., \"Domain names - implementation and\n           specification\", STD 13, RFC 1035, DOI 10.17487/RFC1035,\n           November 1987, <https://www.rfc-editor.org/info/rfc1035>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "[RFC7435]  Dukhovni, V., \"Opportunistic Security: Some Protection\n           Most of the Time\", RFC 7435, DOI 10.17487/RFC7435,\n           December 2014, <https://www.rfc-editor.org/info/rfc7435>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "[RFC7672]  Dukhovni, V. and W. Hardaker, \"SMTP Security via\n           Opportunistic DNS-Based Authentication of Named Entities\n           (DANE) Transport Layer Security (TLS)\", RFC 7672,\n           DOI 10.17487/RFC7672, October 2015,\n           <https://www.rfc-editor.org/info/rfc7672>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "[RFC7766]  Dickinson, J., Dickinson, S., Bellis, R., Mankin, A., and\n           D. Wessels, \"DNS Transport over TCP - Implementation\n           Requirements\", RFC 7766, DOI 10.17487/RFC7766, March 2016,\n           <https://www.rfc-editor.org/info/rfc7766>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "[RFC7830]  Mayrhofer, A., \"The EDNS(0) Padding Option\", RFC 7830,\n           DOI 10.17487/RFC7830, May 2016,\n           <https://www.rfc-editor.org/info/rfc7830>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "[RFC8305]  Schinazi, D. and T. Pauly, \"Happy Eyeballs Version 2:\n           Better Connectivity Using Concurrency\", RFC 8305,\n           DOI 10.17487/RFC8305, December 2017,\n           <https://www.rfc-editor.org/info/rfc8305>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "[RFC8460]  Margolis, D., Brotman, A., Ramakrishnan, B., Jones, J.,\n           and M. Risher, \"SMTP TLS Reporting\", RFC 8460,\n           DOI 10.17487/RFC8460, September 2018,\n           <https://www.rfc-editor.org/info/rfc8460>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "[RFC8461]  Margolis, D., Risher, M., Ramakrishnan, B., Brotman, A.,\n           and J. Jones, \"SMTP MTA Strict Transport Security (MTA-\n           STS)\", RFC 8461, DOI 10.17487/RFC8461, September 2018,\n           <https://www.rfc-editor.org/info/rfc8461>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "[RFC8467]  Mayrhofer, A., \"Padding Policies for Extension Mechanisms\n           for DNS (EDNS(0))\", RFC 8467, DOI 10.17487/RFC8467,\n           October 2018, <https://www.rfc-editor.org/info/rfc8467>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "[RFC8484]  Hoffman, P. and P. McManus, \"DNS Queries over HTTPS\n           (DoH)\", RFC 8484, DOI 10.17487/RFC8484, October 2018,\n           <https://www.rfc-editor.org/info/rfc8484>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "[RFC8806]  Kumari, W. and P. Hoffman, \"Running a Root Server Local to\n           a Resolver\", RFC 8806, DOI 10.17487/RFC8806, June 2020,\n           <https://www.rfc-editor.org/info/rfc8806>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "[RFC9102]  Dukhovni, V., Huque, S., Toorop, W., Wouters, P., and M.\n           Shore, \"TLS DNSSEC Chain Extension\", RFC 9102,\n           DOI 10.17487/RFC9102, August 2021,\n           <https://www.rfc-editor.org/info/rfc9102>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "[RFC9156]  Bortzmeyer, S., Dolmans, R., and P. Hoffman, \"DNS Query\n           Name Minimisation to Improve Privacy\", RFC 9156,\n           DOI 10.17487/RFC9156, November 2021,\n           <https://www.rfc-editor.org/info/rfc9156>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "[TLS-ECH]  Rescorla, E., Oku, K., Sullivan, N., and C. A. Wood, \"TLS\n           Encrypted Client Hello\", Work in Progress, Internet-Draft,\n           draft-ietf-tls-esni-17, 9 October 2023,\n           <https://datatracker.ietf.org/doc/html/draft-ietf-tls-\n           esni-17>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "[DNS-ER]   Arends, R. and M. Larson, \"DNS Error Reporting\", Work in\n           Progress, Internet-Draft, draft-ietf-dnsop-dns-error-\n           reporting-07, 17 November 2023,\n           <https://datatracker.ietf.org/doc/html/draft-ietf-dnsop-\n           dns-error-reporting-07>.",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 0,
      "text": "Appendix A. Assessing the Experiment",
      "section_title": true,
      "ja": "付録A. 実験の評価"
    },
    {
      "indent": 3,
      "text": "This document is an Experimental RFC. In order to assess the success of the experiment, some key metrics could be collected by the technical community about the deployment of the protocol in this document. These metrics will be collected in recursive resolvers, authoritative servers, and the networks containing them. Some key metrics include the following.",
      "ja": "このドキュメントは実験的なRFCです。実験の成功を評価するために、このドキュメントのプロトコルの展開について技術コミュニティによっていくつかの重要なメトリックを収集することができます。これらのメトリックは、再帰リゾルバ、権威サーバー、およびそれらを含むネットワークで収集されます。いくつかの重要なメトリックには、以下が含まれます。"
    },
    {
      "indent": 6,
      "text": "* Comparison of the CPU and memory use between Do53 and encrypted transports.",
      "ja": "* Do53と暗号化されたトランスポートの間のCPUとメモリの使用の比較。"
    },
    {
      "indent": 6,
      "text": "* Comparison of the query response rates between Do53 and encrypted transports.",
      "ja": "* Do53と暗号化されたトランスポートの間のクエリ応答率の比較。"
    },
    {
      "indent": 6,
      "text": "* Measurement of server authentication successes and failures.",
      "ja": "* サーバー認証の成功と障害の測定。"
    },
    {
      "indent": 6,
      "text": "* Measurement and descriptions of observed attack traffic, if any.",
      "ja": "* 観察された攻撃トラフィックの測定と説明（ある場合）。"
    },
    {
      "indent": 6,
      "text": "* Comparison of transactional bandwidth (ingress/egress, packets per second, bytes per second) between Do53 and encrypted transports.",
      "ja": "* Do53と暗号化されたトランスポートの間のトランザクション帯域幅（イングレス/エグレス、1秒あたりのパケット数、1秒あたりのバイト数）の比較。"
    },
    {
      "indent": 0,
      "text": "Appendix B. Defense against Active Attackers",
      "section_title": true,
      "ja": "付録B. アクティブな攻撃者に対する防御"
    },
    {
      "indent": 3,
      "text": "The protocol described in this document provides no defense against active attackers. A future protocol for recursive-to-authoritative DNS might want to provide such protection.",
      "ja": "このドキュメントで説明されているプロトコルは、アクティブな攻撃者に対する防御を提供しません。再帰-権威間DNSの将来のプロトコルは、そのような保護を提供したいと思うかもしれません。"
    },
    {
      "indent": 3,
      "text": "This appendix assumes that the use case for that future protocol is a recursive resolver that wants to prevent an active attack on communication between it and an authoritative server that has committed to offering encrypted DNS transport. An inherent part of this use case is that the recursive resolver would want to respond with a SERVFAIL response to its client if it cannot make an authenticated encrypted connection to any of the authoritative nameservers for a name.",
      "ja": "この付録は、その将来のプロトコルのユースケースは、暗号化されたDNSトランスポートを提供することを約束した権威サーバーとの間の通信に対するアクティブな攻撃を防ぐことを望んでいる再帰リゾルバであると想定しています。このユースケースの固有の部分は、名前の権威ネームサーバーのいずれかに認証された暗号化された接続を作成できない場合、再帰リゾルバがクライアントにSERVFAIL応答で応答したいということです。"
    },
    {
      "indent": 3,
      "text": "However, an authoritative server that merely offers encrypted transport (for example, by following the guidance in Section 3) has made no such commitment, and no recursive resolver that prioritizes delivery of DNS records to its clients would want to \"fail closed\" unilaterally.",
      "ja": "ただし、暗号化されたトランスポートを単に提供する権威サーバー（たとえば、セクション3のガイダンスに従うことで）は、そのようなコミットメントを行っていません。また、クライアントへのDNSレコードの配信を優先する再帰リゾルバは、一方的に「フェイルクローズ」したいとは考えないでしょう。"
    },
    {
      "indent": 3,
      "text": "Therefore, such a future protocol would need at least three major distinctions from the protocol described in this document:",
      "ja": "したがって、このような将来のプロトコルには、このドキュメントで説明されているプロトコルから少なくとも3つの大きな区別が必要になります。"
    },
    {
      "indent": 6,
      "text": "* A signaling mechanism that tells the recursive resolver that the authoritative server intends to offer authenticated encryption.",
      "ja": "* 権威サーバーが認証された暗号化を提供することを意図していることを再帰リゾルバに伝えるシグナリングメカニズム。"
    },
    {
      "indent": 6,
      "text": "* Authentication of the authoritative server.",
      "ja": "* 権威サーバーの認証。"
    },
    {
      "indent": 6,
      "text": "* A way to combine defense against an active attacker with the defenses described in this document.",
      "ja": "* アクティブな攻撃者に対する防御と、この文書に記載されている防御を組み合わせる方法。"
    },
    {
      "indent": 3,
      "text": "This can be thought of as a DNS analog to [RFC8461] or [RFC7672].",
      "ja": "これは、[RFC8461]または[RFC7672]のDNSアナログと考えることができます。"
    },
    {
      "indent": 0,
      "text": "B.1. Signaling Mechanism Properties",
      "section_title": true,
      "ja": "B.1. シグナリングメカニズムの特性"
    },
    {
      "indent": 3,
      "text": "To defend against an active attacker, the signaling mechanism needs to be able to indicate that the recursive resolver should fail closed if it cannot authenticate the server for a particular query.",
      "ja": "アクティブな攻撃者を防御するには、シグナリングメカニズムが、特定のクエリに対してサーバーを認証できない場合、再帰リゾルバがフェイルクローズすべきであることを示すことができる必要があります。"
    },
    {
      "indent": 3,
      "text": "The signaling mechanism itself would have to be resistant to downgrade attacks from active attackers.",
      "ja": "シグナリングメカニズム自体は、アクティブな攻撃者からのダウングレード攻撃に耐性がなければなりません。"
    },
    {
      "indent": 3,
      "text": "One open question is how such a signal should be scoped. While this document scopes opportunistic state about encrypted transport based on the IP addresses of the client and server, signaled intent to offer encrypted transport is more likely to be scoped by the queried zone in the DNS or by the nameserver name than by the IP address.",
      "ja": "未解決の質問の1つは、そのような信号をどのようにスコープすべきかです。このドキュメントは、クライアントとサーバーのIPアドレスに基づいて暗号化されたトランスポートに関する日和見状態をスコープしますが、暗号化されたトランスポートを提供する意図のシグナルは、IPアドレスよりも、DNSのクエリ対象ゾーンまたはネームサーバー名によってスコープされる可能性が高くなります。"
    },
    {
      "indent": 3,
      "text": "A reasonable authoritative server operator or zone administrator probably doesn't want to risk breaking anything when they first enable the signal. Therefore, a signaling mechanism should probably also offer a means to report problems to the authoritative server operator without the client failing closed. Such a mechanism is likely to be similar to those described in [RFC8460] or [DNS-ER].",
      "ja": "合理的な権威サーバーオペレーターまたはゾーン管理者は、おそらく最初に信号を有効にするときに何かを壊すリスクを冒したくないでしょう。したがって、シグナリングメカニズムは、クライアントがフェイルクローズすることなく、権威サーバーオペレーターに問題を報告する手段もおそらく提供する必要があります。このようなメカニズムは、[RFC8460]または[DNS-ER]に記載されているメカニズムと類似している可能性があります。"
    },
    {
      "indent": 0,
      "text": "B.2. Authentication of Authoritative Servers",
      "section_title": true,
      "ja": "B.2. 権威あるサーバーの認証"
    },
    {
      "indent": 3,
      "text": "Forms of server authentication might include:",
      "ja": "サーバー認証のフォームには次のものが含まれます。"
    },
    {
      "indent": 6,
      "text": "* An X.509 certificate issued by a widely known certification authority associated with the common NS names used for this authoritative server.",
      "ja": "* この権威サーバーに使用される一般的なNS名に関連する広く知られている認証局によって発行されたX.509証明書。"
    },
    {
      "indent": 6,
      "text": "* DNS-Based Authentication of Named Entities (DANE) (to avoid infinite recursion, the DNS records necessary to authenticate could be transmitted in the TLS handshake using the DNSSEC chain extension (see [RFC9102])).",
      "ja": "* DNSベースの名前付きエンティティ（DANE）の認証（無限の再帰を回避するために、認証に必要なDNSレコードは、DNSSECチェーン拡張を使用してTLSハンドシェイクに送信できます（[RFC9102]を参照）））。"
    },
    {
      "indent": 3,
      "text": "A recursive resolver would have to verify the server's identity. When doing so, the identity would presumably be based on the NS name used for a given query or the IP address of the server.",
      "ja": "再帰リゾルバは、サーバーのIDを確認する必要があります。そうする場合、IDはおそらく、特定のクエリまたはサーバーのIPアドレスに使用されるNS名に基づいています。"
    },
    {
      "indent": 0,
      "text": "B.3. Combining Protocols",
      "section_title": true,
      "ja": "B.3. プロトコルの組み合わせ"
    },
    {
      "indent": 3,
      "text": "If this protocol gains reasonable adoption, and a newer protocol that can offer defense against an active attacker were available, deployment is likely to be staggered and incomplete. This means that an operator that wants to maximize confidentiality for their users will want to use both protocols together.",
      "ja": "このプロトコルが合理的な採用を獲得し、アクティブな攻撃者に対する防御を提供できる新しいプロトコルが利用可能である場合、展開はずらして不完全になる可能性があります。これは、ユーザーの機密性を最大化したいオペレーターが両方のプロトコルを一緒に使用したいことを意味します。"
    },
    {
      "indent": 3,
      "text": "Any new stronger protocol should consider how it interacts with the opportunistic protocol defined here, so that operators are not faced with the choice between widespread opportunistic protection against passive attackers (this document) and more narrowly targeted protection against active attackers.",
      "ja": "新しい強力なプロトコルは、ここで定義されている日和見プロトコルとの相互作用を検討する必要があります。これにより、オペレーターは、パッシブ攻撃者に対する広範な日和見的保護（この文書）とアクティブな攻撃者に対するより狭いターゲットの保護の選択に直面していません。"
    },
    {
      "indent": 0,
      "text": "Acknowledgements",
      "section_title": true,
      "ja": "謝辞"
    },
    {
      "indent": 3,
      "text": "Many people contributed to the development of this document beyond the authors, including Alexander Mayrhofer, Brian Dickson, Christian Huitema, Dhruv Dhody, Eric Nygren, Erik Kline, Florian Obser, Haoyu Song, Jim Reid, Kris Shrishak, Peter Thomassen, Peter van Dijk, Ralf Weber, Rich Salz, Robert Evans, Sara Dickinson, Scott Hollenbeck, Stephane Bortzmeyer, Yorgos Thessalonikefs, and the DPRIVE Working Group.",
      "ja": "多くの人々が、著者以外にもこのドキュメントの開発に貢献しました。その中には、Alexander Mayrhofer、Brian Dickson、Christian Huitema、Dhruv Dhody、Eric Nygren、Erik Kline、Florian Obser、Haoyu Song、Jim Reid、Kris Shrishak、Peter Thomassen、Peter van Dijk、Ralf Weber、Rich Salz、Robert Evans、Sara Dickinson、Scott Hollenbeck、Stephane Bortzmeyer、Yorgos Thessalonikefs、およびDPRIVEワーキンググループが含まれます。"
    },
    {
      "indent": 0,
      "text": "Authors' Addresses",
      "section_title": true,
      "ja": "著者のアドレス"
    },
    {
      "indent": 3,
      "text": "Daniel Kahn Gillmor (editor)\nAmerican Civil Liberties Union\n125 Broad St.\nNew York, NY 10004\nUnited States of America\nEmail: dkg@fifthhorseman.net",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "Joey Salazar (editor)\nAlajuela\n20201\nCosta Rica\nEmail: joeygsal@gmail.com",
      "raw": true,
      "ja": ""
    },
    {
      "indent": 3,
      "text": "Paul Hoffman (editor)\nICANN\nUnited States of America\nEmail: paul.hoffman@icann.org",
      "raw": true,
      "ja": ""
    }
  ]
}